
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>4. A matter of style &#8212; Object oriented programming in Python for mathematicians 2021.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/fenics.css" />
    <link rel="stylesheet" type="text/css" href="_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/proof.js"></script>
    <script async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="5. Abstract data types" href="5_abstract_data_types.html" />
    <link rel="prev" title="3. Objects and abstraction" href="3_objects.html" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0EFVH5C4DC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0EFVH5C4DC');
</script>
<link rel="stylesheet" href="_static/featured.css">


<link rel="shortcut icon" href="_static/icon.ico" />


  </head><body>
<div class="wrapper">
  <div id="access">
    <div class="menu">
      <ul>
          <li class="page_item"><a href="https://github.com/oxmmscpython/object-oriented-programming" title="GitHub">GitHub</a></li>
      </ul>
    </div><!-- .menu -->
  </div><!-- #access -->
</div><!-- #wrapper -->


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="a-matter-of-style">
<span id="style"></span><h1><span class="section-number">4. </span>A matter of style<a class="headerlink" href="#a-matter-of-style" title="Permalink to this headline">¶</a></h1>
<details class="sphinx-bs dropdown card mb-3">
<summary class="summary-title card-header">
Video: why style?<div class="summary-down docutils">
<svg version="1.1" width="24" height="24" class="octicon octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="summary-up docutils">
<svg version="1.1" width="24" height="24" class="octicon octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<div class="vimeo docutils container">
<iframe src="https://player.vimeo.com/video/499766703"
frameborder="0" allow="autoplay; fullscreen"
allowfullscreen></iframe></div>
</div>
</details><section id="the-value-of-convention">
<h2><span class="section-number">4.1. </span>The value of convention<a class="headerlink" href="#the-value-of-convention" title="Permalink to this headline">¶</a></h2>
<p>Consider the following definition of the limit of a function <span class="math notranslate nohighlight">\(f\)</span> at a point <span class="math notranslate nohighlight">\(c\)</span>:</p>
<div class="proof proof-type-definition" id="id3">

    <div class="proof-title">
        <span class="proof-type">Definition 4.1</span>
        
    </div><div class="proof-content">
<p>Suppose we have a function <span class="math notranslate nohighlight">\(f(x): \mathbb{R} \rightarrow \mathbb{R}\)</span>. Then:</p>
<div class="math notranslate nohighlight">
\[\lim_{x\rightarrow c} f(x) = L \iff \forall \delta &gt; 0,\ \exists \epsilon &gt; 0,\ |x - c| &lt; \epsilon \Rightarrow |f(x) - L| &lt; \delta\]</div>
</div></div><p>This is a perfectly valid definition of a limit: you could use it to
go on and derive all the analysis you have learned so far. However, you
would confuse yourself and your readers horribly, because I have
swapped the roles of <span class="math notranslate nohighlight">\(\delta\)</span> and <span class="math notranslate nohighlight">\(\epsilon\)</span> in the
definition. The formal properties of mathematical objects do not
depend on the names we give them or, often, on how we lay out formulae
on a page. However, mathematics is designed to be read by humans with
their habit-forming, pattern-matching brains. So if everyone adopts
similar conventions for how to write down mathematics, everyone
schooled in those conventions will find that mathematics easier to
understand. This is vitally important because understanding
mathematics is <em>hard</em>. Non-standard notation makes it doubly hard
because the reader has to consciously remember the meaning of all the
symbols. Conversely, once a reader has learned the notational
conventions for a field of mathematics, the meanings of the symbols
become natural and don’t require conscious thought. This leaves all
the available brainpower to concentrate on the mathematical content
at hand.</p>
<p>You might at first think that this logic does not apply to computer
programs. After all, a computer program is read by another computer
program, and is not understood but rather acted on
mechanically. Surely it doesn’t matter how it looks or what symbols
you use, so long as it’s correct and, possibly, fast? This entirely
understandable sentiment has afflicted almost all programmers at some
point or another and typically has got them into more or less serious
difficulty before they realised that it’s completely wrong.</p>
<p>In reality, a computer program is frequently read. Indeed, code is
typically read many more times than it is written or changed. Most
obviously, programmers read code in order to understand its functionality,
and in order to work out what is wrong with the code when it fails to
produce the correct results. Reading code is very much like reading
mathematics because a computer program is nothing but a realisation
of mathematical algorithms. Consequently, the observation that maths
can be very hard to read carries over to code, and therefore the need
to make code as easy to understand as possible also applies
here. Another analogy that carries over from mathematics is that very
often it’s one’s own work that one is trying to understand and
correct. This ought to create a very strong incentive to write very
clear code adhering to all the conventions, because the poor
individual who has to read your work to find the bugs might very well
be you!</p>
<p>Just as in mathematics, programming has a whole set of conventions
which sit on top of the formal requirements of a programming language.
These exist in order to make the code easier for all programmers
to read. Some of these rules, typically the more formulaic ones about
matters such as code layout and naming conventions, are somewhat
different in different programming languages. Others, most especially
higher lever principles like parsimony and modularity, are universal
principles that apply more or less regardless of the language employed
or the sort of programming being undertaken. Good programming style,
like good writing style, is a skill learned through experience and
through receiving feedback on the code you write, and it is not the
intention of this chapter to produce an exhaustive guide. However, it
is useful to introduce some of the key concepts, rules and conventions
in a more formal way.</p>
</section>
<section id="pep-8">
<h2><span class="section-number">4.2. </span>PEP 8<a class="headerlink" href="#pep-8" title="Permalink to this headline">¶</a></h2>
<p>Publishers, journals, and institutions often have style guides
designed to instil a certain uniformity in the use of English (or
other human languages). Similarly, style guides exist for programming
languages. In some languages, the preferred style can vary
significantly from project to project, and there can be vigorous
disagreement between factions about fine points of style, such as
whether or not an opening curly bracket should start on a new
line. Fortunately, the Python community has an essentially unified and
very widely followed set of conventions. These are codified in one of
the Python standards documents, <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP 8</a> <a class="footnote-reference brackets" href="#pep" id="id2">1</a>. PEP 8 isn’t all
that long, and it is worth taking the time to read. Not every rule in
PEP 8 is reproduced in this chapter, though many of the most commonly
encountered ones are. Conversely, PEP 8 is rather narrowly concerned
with code layout rules while this chapter roams more widely.</p>
<section id="linters">
<h3><span class="section-number">4.2.1. </span>Linters<a class="headerlink" href="#linters" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3">
<summary class="summary-title card-header">
Video: installing and using a linter.<div class="summary-down docutils">
<svg version="1.1" width="24" height="24" class="octicon octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="summary-up docutils">
<svg version="1.1" width="24" height="24" class="octicon octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<div class="vimeo docutils container">
<iframe src="https://player.vimeo.com/video/499770130"
frameborder="0" allow="autoplay; fullscreen"
allowfullscreen></iframe></div>
</div>
</details><p>One of the helpful characteristics of PEP 8 is that many of its strictures can
be enforced automatically by a computer program. Programs that automatically
check programming style are called linters. Lint are the little fibres that tend
to stick to clothes, especially suit jackets, and make them ugly. So a linter is
a program that finds the little ugly things in your code.</p>
<p>Originally, you ran the linter with your source file as an input, and it produced
a report as an output, listing all of the problems it found in your code. You
can still run a linter like this, and it’s very useful as an automated check
that the code committed to git is clean. However, Python-aware editors are often
able to run a linter for you, and display the results by highlighting code or
lines of code with problem. The effect is very like the highlighting of spelling
and grammar problems in many word processors and email clients.</p>
<p>One such program is called Flake8. Running Flake8 on all of the source
code in a project, preferably automatically on every commit, is an
excellent mechanism for keeping a project’s code in PEP 8
conformance. Indeed, without a mechanism like this, there is a strong
tendency for programmers to cut style corners, with the effect that
the code in a project becomes harder and harder to read and work with.</p>
</section>
<section id="installing-flake8">
<h3><span class="section-number">4.2.2. </span>Installing Flake8<a class="headerlink" href="#installing-flake8" title="Permalink to this headline">¶</a></h3>
<p>Flake8 is a Python package, which can be installed using pip. Make sure you’ve
activated your <a class="reference internal" href="2_programs_in_files.html#term-virtual-environment"><span class="xref std std-term">virtual environment</span></a> and then run:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python -m pip install flake8
</pre></div>
</div>
<p>This is enough to run Flake8 on the command line, however you will probably want
to set up your editor to highlight flake8 incompatibilities in your source. For
visual studio code, first open the command palette by typing <kbd class="kbd docutils literal notranslate">control</kbd> +
<kbd class="kbd docutils literal notranslate">shift</kbd> + <kbd class="kbd docutils literal notranslate">P</kbd> (<kbd class="kbd docutils literal notranslate">⌘</kbd> + <kbd class="kbd docutils literal notranslate">shift</kbd> + <kbd class="kbd docutils literal notranslate">P</kbd> on Mac). There type
“Python: Select Linter” to bring up the list of available linters, and select
“flake8” from the dropdown list. The video above shows this process.</p>
</section>
<section id="how-to-tell-flake8-to-shut-up">
<h3><span class="section-number">4.2.3. </span>How to tell Flake8 to shut up<a class="headerlink" href="#how-to-tell-flake8-to-shut-up" title="Permalink to this headline">¶</a></h3>
<p>Near the top of PEP 8 is the following heading:</p>
<blockquote>
<div><p>A foolish consistency is the hobgoblin of little minds.</p>
</div></blockquote>
<p>What this refers to is that just religiously following PEP 8 is not enough to
produce highly readable code. Indeed, sometimes the rules might induce you do to
something which makes no sense at all. In those cases, one should step outside
PEP 8. This is a dangerous licence to take, and it is important to point out that
this does not mean that a programmer should ignore PEP 8 merely because they
disagree with a particular convention. Breaking PEP 8 is something you should do
only when you really have to.</p>
<p>In the rare cases where it is necessary to break PEP 8, Flake8 turns into a
problem. It doesn’t know anything of the judgement call that the programmer has
made, and so will complain about the offending code. For example, we have
learned that it is frequently desirable to import names in the
<code class="file docutils literal notranslate"><span class="pre">__init__.py</span></code> file of a <a class="reference internal" href="2_programs_in_files.html#term-package"><span class="xref std std-term">package</span></a> in order to include them in the
package’s top level <a class="reference internal" href="2_programs_in_files.html#term-namespace"><span class="xref std std-term">namespace</span></a>. The problem with this is that these names
are not used inside the <code class="file docutils literal notranslate"><span class="pre">__init__.py</span></code> file so Flake8 will complain that
this is an unnecessary import.</p>
<p>The way to suppress linter errors is using a special comment at the end of the
line which causes the error. For example, <code class="file docutils literal notranslate"><span class="pre">fibonacci/__init__.py</span></code> contains
the following line:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">.fibonacci</span> <span class="kn">import</span> <span class="n">fib</span>
</pre></div>
</div>
<p>This causes the following Flake8 error:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>flake8 fibonacci
<span class="go">fibonacci/__init__.py:1:1: F401 &#39;.fibonacci.fib&#39; imported but unused</span>
</pre></div>
</div>
<p>We suppress this error by adding this comment:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">.fibonacci</span> <span class="kn">import</span> <span class="n">fib</span>  <span class="c1"># noqa F401</span>
</pre></div>
</div>
<p>The comment starts with the keyword <code class="xref py py-obj docutils literal notranslate"><span class="pre">noqa</span></code>, which stands for “no questions
asked” and then gives the error code which is to be ignored for this line. This
can be found in the Flake8 output.</p>
</section>
</section>
<section id="code-layout">
<h2><span class="section-number">4.3. </span>Code layout<a class="headerlink" href="#code-layout" title="Permalink to this headline">¶</a></h2>
<p>Perhaps surprisingly, one of the most important factors in making code
readable is the space, or lack of it, between and around the text
which makes up the code. Whitespace affects readability in many
ways. Too much code bunched together makes it hard for the eye to
separate programme statements, while leaving too much space limits the
amount of code which fits in the editor window at once. This requires
the programmer to scroll constantly and to have to remember
definitions which are not currently on the screen.</p>
<p>As in written prose, whitespace can also convey information by
grouping together concepts which are related and separating distinct
ideas. This gives the reader visual clues which can aid in
understanding the code. With this in mind, we now turn to some of the
PEP 8 rules around white space and code formatting.</p>
<section id="blank-lines">
<h3><span class="section-number">4.3.1. </span>Blank lines<a class="headerlink" href="#blank-lines" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Classes and functions defined at the top level of a module
(i.e. not nested in other classes or functions) have two blank
lines before and after them. These are the largest and most
distinct units in a module, so it helps the reader to make them
quite distinct from each other.</p></li>
<li><p>Methods within a class are separated by a single blank
line. Similarly, functions defined inside other functions are
separated from surrounding code by a single blank line.</p></li>
<li><p>Statements within functions usually follow on the immediate next
line, except that logical groups of statements, can be separated by
single blank lines. Think of each statement as a sentence following
on from the previous, with blank lines used to divide the function
into short paragraphs.</p></li>
</ol>
<p><strong>Do not add extra blank lines to space out code</strong>. Vertical space on
the screen is limited, your readers will not thank you.</p>
</section>
<section id="white-space-within-lines">
<h3><span class="section-number">4.3.2. </span>White space within lines<a class="headerlink" href="#white-space-within-lines" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Don’t put a space after an opening bracket (of any shape), or
before a closing bracket. This is because the role of brackets is
to group their contents, so it’s confusing to visually separate the
bracket from the contents.</p>
<blockquote>
<div><div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># Space after opening bracket.</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="p">)</span> <span class="c1"># Space after closing bracket.</span>
</pre></div>
</div>
</div>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># No space between brackets and contents.</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p>Similarly, don’t put a space between the function name and the
opening round bracket of a function call, or between a variable
name and the opening square bracket of an index. In each of these
cases, the opening bracket belongs to the object, so it’s confusing
to insert space between the object name and the bracket.</p>
<blockquote>
<div><div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_function</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Space between function name and bracket.</span>
<span class="n">x</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># Space between variable name and index square bracket.</span>
</pre></div>
</div>
</div>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_function</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p>Put a space after a comma but not before it, exactly like you would
in writing prose. Following the convention that everyone is used to
from writing aids understanding. Where a trailing comma comes right
before a closing bracket, then don’t put a space. The rule that
there are no spaces before a closing bracket is more important.</p>
<blockquote>
<div><div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># Spaces missing after commas.</span>
<span class="p">(</span><span class="mi">1</span> <span class="p">,</span><span class="mi">2</span> <span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># Spurious spaces before commas.</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">)</span> <span class="c1"># Space before closing bracket.</span>
</pre></div>
</div>
</div>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># Spaces after commas.</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,)</span> <span class="c1"># No space before closing bracket.</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p>Put exactly one space on each side of an <a class="reference external" href="https://docs.python.org/3/reference/simple_stmts.html#assignment" title="(in Python v3.10)"><span class="xref std std-ref">assignment</span></a> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">=</span></code>) and an
<a class="reference external" href="https://docs.python.org/3/reference/simple_stmts.html#augassign" title="(in Python v3.10)"><span class="xref std std-ref">augmented assignment</span></a> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">+=</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">-=</span></code>, etc.). In an assignment
statement, the most important distinction is between the left and
right hand sides of the assignment, so adding space here aids the
reader.</p>
<blockquote>
<div><div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="o">=</span><span class="mi">1</span> <span class="c1"># Missing spaces around equals sign.</span>
<span class="n">x</span><span class="o">+=</span><span class="mi">1</span> <span class="c1"># Missing spaces around augmented addition operator.</span>

<span class="n">frog</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">cat</span>  <span class="o">=</span> <span class="mi">3</span> <span class="c1"># Additional space before equals sign.</span>
</pre></div>
</div>
</div>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">frog</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">cat</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p>Do not put a space either before or after the equals sign of a <a class="reference external" href="https://docs.python.org/3/tutorial/controlflow.html#tut-keywordargs" title="(in Python v3.10)"><span class="xref std std-ref">keyword
argument</span></a>. In this case, grouping the parameter name and
the argument is more important. Also creates a visual distinction between
assignment statements and keyword arguments.</p>
<blockquote>
<div><div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">myfunction</span><span class="p">(</span><span class="n">arg1</span> <span class="o">=</span> <span class="n">val1</span><span class="p">,</span> <span class="n">arg2</span> <span class="o">=</span> <span class="n">val2</span><span class="p">)</span> <span class="c1"># Spaces around equals signs.</span>
</pre></div>
</div>
</div>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">myfunction</span><span class="p">(</span><span class="n">arg1</span><span class="o">=</span><span class="n">val1</span><span class="p">,</span> <span class="n">arg2</span><span class="o">=</span><span class="n">val2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p>Put exactly one space before and after the lowest priority
mathematical operators in an expression. This has the effect of
visually separating the terms of an expression, as we
conventionally do in mathematics.</p>
<blockquote>
<div><div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">=</span> <span class="mi">3</span><span class="o">*</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">4</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="mi">5</span> <span class="c1"># No spaces around +</span>
</pre></div>
</div>
</div>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">=</span> <span class="mi">3</span><span class="o">*</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">4</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="mi">5</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p><strong>Never, ever</strong> have blank spaces at the end of a line, even a blank
line. These tend to get changed by editors, which results in lots
of spurious differences between otherwise identical code. This can
make the difference between two commits of a file very hard to read
indeed.</p></li>
</ol>
</section>
<section id="line-breaks">
<h3><span class="section-number">4.3.3. </span>Line breaks<a class="headerlink" href="#line-breaks" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Have no lines longer than 79 characters. Limiting the line length
makes lines easier to read, and prevents the editor from
automatically wrapping the line in harder to read ways. Shorter
lines are also very useful when using side-by-side differencing
tools to show the differences between two versions of a piece of
code.</p></li>
<li><p>When breaking lines to fit under 79 characters, it’s better to
break the lines using the implied continuation within round, square
or curly brackets than explicitly with a backslash. This is because
the brackets provide good visual “book ends” for the beginning and
end of the continuation.</p></li>
<li><p>When a mathematical operator occurs at a line break, always put the
operator first on the next line, and not last on the first
line. Having the second line start with a mathematical operator
provides a solid visual clue that the next line is a continuation
of the previous line. (If you look closely, this is also the rule
that most publishers of maths books use).</p>
<blockquote>
<div><div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_function</span><span class="p">(</span><span class="n">first_term</span> <span class="o">+</span> <span class="c1"># Trailing + operator.</span>
            <span class="n">second_term</span> <span class="o">+</span>
            <span class="n">third_term</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_function</span><span class="p">(</span><span class="n">first_term</span>
            <span class="o">+</span> <span class="n">second_term</span> <span class="c1"># Leading + operator</span>
            <span class="o">+</span> <span class="n">third_term</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
</ol>
</section>
<section id="indentation">
<h3><span class="section-number">4.3.4. </span>Indentation<a class="headerlink" href="#indentation" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Indentation is <em>always</em> by four spaces per indentation level. Usually
Python-aware text editors are good at enforcing this, and this is basically
true of Visual Studio Code. If you’re using a text editor which doesn’t
indent by four spaces (especially if it uses <kbd class="kbd docutils literal notranslate">tab</kbd> characters for indentation)
then Google how to change it to four spaces!</p></li>
<li><p>When indenting continuation lines inside brackets, there are two
options, usually depending on how many characters are already on
the line before the opening bracket:</p>
<ol class="loweralpha simple">
<li><p>With one or more items on the first line after the opening
bracket.  Subsequent lines are indented to one space more than
the opening bracket, so that the first items on each line start
exactly under each other. The closing bracket comes on the same
line as the final item.</p></li>
</ol>
<blockquote>
<div><div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">capitals</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;France&quot;</span><span class="p">:</span> <span class="s2">&quot;Paris&quot;</span><span class="p">,</span>
            <span class="s2">&quot;China&quot;</span><span class="p">:</span> <span class="s2">&quot;Beijing&quot;</span><span class="p">,</span> <span class="c1"># First character one place right of {</span>
            <span class="s2">&quot;Australia&quot;</span><span class="p">:</span> <span class="s2">&quot;Canberra&quot;</span><span class="p">}</span> <span class="c1"># } at the end of the line.</span>
</pre></div>
</div>
</div>
</div></blockquote>
<ol class="loweralpha simple" start="2">
<li><p>With the opening bracket as the last item on the first
line. Subsequent lines are indented more than the first line but
the same as each other. The closing bracket comes on a new line,
and is either indented to the same level as the first line, or
to the subsequent lines (but be consistent in nearby code about
which).</p></li>
</ol>
<blockquote>
<div><div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">capitals</span> <span class="o">=</span> <span class="p">{</span> <span class="c1"># First line ends with {</span>
    <span class="s2">&quot;Central African Republic&quot;</span><span class="p">:</span> <span class="s2">&quot;Bangui&quot;</span><span class="p">,</span> <span class="c1"># Next line indented.</span>
    <span class="s2">&quot;Trinidad and Tobago&quot;</span><span class="p">:</span> <span class="s2">&quot;Port of Spain&quot;</span><span class="p">,</span> <span class="c1"># Indented to match.</span>
    <span class="p">}</span> <span class="c1"># Indented to match.</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
</ol>
</section>
</section>
<section id="names">
<h2><span class="section-number">4.4. </span>Names<a class="headerlink" href="#names" title="Permalink to this headline">¶</a></h2>
<p>Programs are full of names. Variables, classes, functions,
modules: much, perhaps most, of the text of a program is made up of
names. The choice of names, therefore, has a massive impact on the
readability of a program. There are two aspects to naming
conventions. One is a set of rules about the formatting of names: when
to use capitals, when underscores and so on. This is covered by PEP 8
and we reproduce some of the important rules below. The second aspect
is the choice of the letter, word, or words that make up a name. This
is much more a matter of judgement, though there are guiding principles
that greatly help with clarity.</p>
<section id="pep-8-name-conventions">
<h3><span class="section-number">4.4.1. </span>PEP 8 name conventions<a class="headerlink" href="#pep-8-name-conventions" title="Permalink to this headline">¶</a></h3>
<p>PEP 8 has some rather detailed rules for naming, including for
advanced cases that we are unlikely to encounter in the short term,
but the most important rules are short and clear:</p>
<dl>
<dt>class names</dt><dd><p>Class names use the CapWords convention: each word in a name is
capitalised and words are concatenated, without underscores between.</p>
<div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_class</span> <span class="c1"># No capitals, underscore between words.</span>
<span class="n">myClass</span> <span class="c1"># Missing leading capital.</span>
<span class="n">My_Class</span> <span class="c1"># Underscore between words.</span>
</pre></div>
</div>
</div>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">MyClass</span>
</pre></div>
</div>
</div>
</dd>
<dt>exception names</dt><dd><p>Exceptions are classes, so the rules for class names apply with the
addition that exceptions that designate errors should end in
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Error</span></code>.</p>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">PolynomialDivisionError</span> <span class="c1"># For example to indicate indivisibility.</span>
</pre></div>
</div>
</div>
</dd>
<dt>function, variable, and module names</dt><dd><p>Almost all names other than classes are usually written in all
lower case, with underscores separating words. Even proper nouns are
usually spelt with lower case letters to avoid being confused with
class names.</p>
<div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">Euler</span>  <span class="c1"># Don&#39;t capitalise function names.</span>
<span class="n">MaxRadius</span> <span class="o">=</span> <span class="mf">10.</span>  <span class="c1"># No CamelCase.</span>
</pre></div>
</div>
</div>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">euler</span>  <span class="c1"># Lower case, even for names.</span>
<span class="n">max_radius</span> <span class="o">=</span> <span class="mf">10.</span>  <span class="c1"># Separate words with _.</span>
</pre></div>
</div>
</div>
</dd>
<dt>method parameters</dt><dd><p>The first parameter to an <a class="reference internal" href="3_objects.html#term-instance-method"><span class="xref std std-term">instance method</span></a> is the class
itself. <em>Always and without exception</em> name this parameter <code class="xref py py-obj docutils literal notranslate"><span class="pre">self</span></code>.</p>
<div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
</dd>
<dt>non-public methods and attributes</dt><dd><p>If a method or attribute is not intended to be directly accessed
from outside the class, it should have a name starting with an
underscore. This provides a clear distinction between the public
interface of a class and its internal implementation.</p>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">_internal_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg1</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
</dd>
</dl>
</section>
<section id="choosing-names">
<h3><span class="section-number">4.4.2. </span>Choosing names<a class="headerlink" href="#choosing-names" title="Permalink to this headline">¶</a></h3>
<p>Short names help make short lines of code, which in turn makes it easier
to read and understand what the code does to the values it is
operating on. However short names can also be cryptic, making it
difficult to establish what the names mean. This creates a tension:
should names be short to create readable code, or long and descriptive
to clarify their meaning?</p>
<p>A good answer to this dilemma is that local variables should have
short names. These are often the most frequently occurring variables on
a line of code, which makes the statement more
intelligible. Should a reader be unclear what a variable stands for,
the definition of a local variable will not be very far
away. Conversely, a module, class, or function which might be used
far from its definition had better have a descriptive name which makes
its purpose immediately apparent.</p>
</section>
<section id="follow-the-mathematics">
<h3><span class="section-number">4.4.3. </span>Follow the mathematics<a class="headerlink" href="#follow-the-mathematics" title="Permalink to this headline">¶</a></h3>
<p>Remember that the key objective of code style conventions is to make
it easier for readers to understand the code. If the code implements a
mathematical algorithm, then it’s quite likely that readers of that
code will have at least a passing acquaintance with that area of
mathematics. You will therefore greatly help their intuition for what
your code does if the names in the code match the mathematical
conventions for the same concepts. You can use underscores to hint at
subscripts, just like in LaTeX. For example, if you write a function
which changes coordinates, then <code class="xref py py-obj docutils literal notranslate"><span class="pre">x_old</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">x_new</span></code> are likely to be
good names for the coordinate vector before and after the
transformation.</p>
<p>As an exception to the rules about variable case, it is a good idea to
use single capital letter names in circumstances where they would be
used in the maths, for example, to name a matrix.</p>
<p>Mathematicians often use Greek letters as variable names,
occasionally they venture further afield and use Cyrillic or Hebrew
letters. Python does allow for variable names written in other
alphabets, but these are hard to type on many keyboards. Someone
trying to fix bugs in your code will curse you if they can’t even type
the names! Do, by all means, use Greek or other language variable
names where this will make the relationship between the maths and the
code obvious, but write out the Greek letter name in Roman
letters. For example, <code class="xref py py-obj docutils literal notranslate"><span class="pre">theta</span></code> is a very good name for a variable
representing an angle. Capital Greek letters are sometimes represented
by capitalising the first letter of the Roman word, but take care to
avoid situations where this might be confused for a class name.</p>
</section>
<section id="enforcing-name-conventions-in-flake8">
<h3><span class="section-number">4.4.4. </span>Enforcing name conventions in Flake8<a class="headerlink" href="#enforcing-name-conventions-in-flake8" title="Permalink to this headline">¶</a></h3>
<p>The core Flake8 package does not enforce the PEP 8 naming conventions, but there
is a plugin which does so. Simply install the <code class="xref py py-mod docutils literal notranslate"><span class="pre">pep8-naming</span></code> package.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python -m pip install pep8-naming
</pre></div>
</div>
</section>
</section>
<section id="parsimony">
<h2><span class="section-number">4.5. </span>Parsimony<a class="headerlink" href="#parsimony" title="Permalink to this headline">¶</a></h2>
<p>Good programming style is primarily about making programmes easy to
understand. One of the key limitations of understanding is the sheer
number of objects that the reader can keep in their short term memory
at once. Without diverting into the psychology literature, this is
only a couple of handfuls of values at most. This means that the
largest amount of code that a reader can actively reason about is
limited to a few operations on a few variables. As a programmer, there
are two tools at your disposal to achieve this. The first is to be
parsimonious and not introduce unnecessary temporary variables. The
second is to use abstractions such as classes and function interfaces
to split the problem up into small pieces so that each individual
function or method is small enough for a reader to understand.</p>
<p>As a (somewhat contrived) example, assume that you need to create a list of all
the positive integers less than 9999 which are divisible by all the numbers up
to seven. You could write this in 5 difficult to understand lines:</p>
<div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9999</span><span class="p">):</span>
   <span class="k">if</span> <span class="n">_</span> <span class="o">%</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">_</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">_</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">_</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span> \
       <span class="ow">and</span> <span class="n">_</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">_</span> <span class="o">%</span> <span class="mi">6</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">_</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
           <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>It would be much better to write a single more abstract but simpler line:</p>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">num</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9999</span><span class="p">)</span> <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">num</span> <span class="o">%</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">))]</span>
</pre></div>
</div>
</div>
<section id="use-comprehensions">
<h3><span class="section-number">4.5.1. </span>Use comprehensions<a class="headerlink" href="#use-comprehensions" title="Permalink to this headline">¶</a></h3>
<p>It is very common to write loops to populate collection objects with
values. For example, we might make a list of the first 10 square
numbers for further use:</p>
<div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">squares</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">squares</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>This is a fairly typical, if simple, example. It takes three lines of
code: one to initialise the list, one to loop, and one to add the
values to the list. Alternatively, if we had used a <a class="reference external" href="https://docs.python.org/3/tutorial/datastructures.html#tut-listcomps" title="(in Python v3.10)"><span class="xref std std-ref">list
comprehension</span></a>, all three steps would have been subsumed into a single
operation:</p>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">squares</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<p>At least for fairly simple operations, comprehensions are almost
always easier for the reader to understand than loops. In addition to
lists, comprehensions are also available for <a class="reference external" href="https://docs.python.org/3/tutorial/datastructures.html#tut-sets" title="(in Python v3.10)"><span class="xref std std-ref">sets</span></a>
and <a class="reference external" href="https://docs.python.org/3/tutorial/datastructures.html#tut-dictionaries" title="(in Python v3.10)"><span class="xref std std-ref">dictionaries</span></a>.</p>
</section>
<section id="redundant-logical-expressions">
<h3><span class="section-number">4.5.2. </span>Redundant logical expressions<a class="headerlink" href="#redundant-logical-expressions" title="Permalink to this headline">¶</a></h3>
<p>One exceptionally common failure of parsimony is to write expressions of the following form:</p>
<div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">var</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</pre></div>
</div>
</div>
<p>To see the problem with this statement, let’s write out its truth table:</p>
<table class="center-align-center-col docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">var</span></code></p></th>
<th class="head"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">var</span> <span class="pre">==</span> <span class="pre">True</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>T</p></td>
<td><p>T</p></td>
</tr>
<tr class="row-odd"><td><p>F</p></td>
<td><p>F</p></td>
</tr>
</tbody>
</table>
<p>In other words, the expressions <code class="xref py py-obj docutils literal notranslate"><span class="pre">var</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">var</span> <span class="pre">==</span> <span class="pre">True</span></code> are logically
equivalent (at least assuming <code class="xref py py-obj docutils literal notranslate"><span class="pre">var</span></code> is a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bltin-boolean-values" title="(in Python v3.10)"><span class="xref std std-ref">boolean value</span></a>), so it would
have been more parsimonious to write:</p>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">var</span><span class="p">:</span>
</pre></div>
</div>
</div>
<p>Similarly:</p>
<div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">var</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</pre></div>
</div>
</div>
<p>is frowned upon by programmers in favour of:</p>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">var</span><span class="p">:</span>
</pre></div>
</div>
</div>
<p>Finally, the use of <a class="reference external" href="https://docs.python.org/3/reference/compound_stmts.html#else" title="(in Python v3.10)"><span class="xref std std-ref">else</span></a> (or <a class="reference external" href="https://docs.python.org/3/reference/compound_stmts.html#elif" title="(in Python v3.10)"><span class="xref std std-ref">elif</span></a>) can reduce the number
of logical expressions that the reader has to read and
understand. This means that:</p>
<div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">var</span><span class="p">:</span>
    <span class="c1"># Some code</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">var</span><span class="p">:</span>
    <span class="c1"># Some other code</span>
</pre></div>
</div>
</div>
<p>should be avoided in favour of:</p>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">var</span><span class="p">:</span>
    <span class="c1"># Some code</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># Some other code.</span>
</pre></div>
</div>
</div>
<p>In addition to having fewer logical operations which the reader needs
to understand, the <code class="xref py py-obj docutils literal notranslate"><span class="pre">if...else</span></code> version explicitly ties
the two cases together as alternatives, which is an additional aid to
comprehension.</p>
</section>
<section id="use-the-fact-that-every-object-is-true-or-false">
<h3><span class="section-number">4.5.3. </span>Use the fact that every object is True or False<a class="headerlink" href="#use-the-fact-that-every-object-is-true-or-false" title="Permalink to this headline">¶</a></h3>
<p>Every Python object is logically either <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">False</span></code></a> according to the
following rules:</p>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">False</span></code></a>.</p></li>
<li><p>Zero is <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">False</span></code></a>, all other numerical values are <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>.</p></li>
<li><p>An empty collection is <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">False</span></code></a>, any other container is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>. For
example, an empty list is <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">False</span></code></a>, but the list <code class="xref py py-obj docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">0]</span></code> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>.</p></li>
<li><p>The null string <code class="xref py py-obj docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">False</span></code></a>, a string containing any characters is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>.</p></li>
<li><p>A user-defined class is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a> unless:</p>
<ol class="loweralpha simple">
<li><p>It defines the <a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__bool__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__bool__()</span></code></a> <a class="reference internal" href="3_objects.html#term-special-method"><span class="xref std std-term">special
method</span></a>. In this case the truth value is whatever this method
returns.</p></li>
<li><p>It doesn’t define <a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__bool__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__bool__()</span></code></a> but does define
<a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__len__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__len__()</span></code></a>. In this case the object is <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">False</span></code></a> if the
length is zero, and <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a> otherwise.</p></li>
</ol>
</li>
</ol>
<p>These rules are laid out formally in <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#truth" title="(in Python v3.10)"><span class="xref std std-ref">the Python documentation</span></a>. One way that they can be used to write simpler, clearer code
is in the very common case of code that should only execute if a
collection object actually contains something. In that case, this form
of test is to be preferred:</p>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">mysequence</span><span class="p">:</span>
    <span class="c1"># Some code using mysequence</span>
</pre></div>
</div>
</div>
<p>instead of:</p>
<div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mysequence</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="c1"># Some code using mysequence</span>
</pre></div>
</div>
</div>
</section>
<section id="avoid-repetitition">
<span id="repetition"></span><h3><span class="section-number">4.5.4. </span>Avoid repetitition<a class="headerlink" href="#avoid-repetitition" title="Permalink to this headline">¶</a></h3>
<p>Programmers very frequently need to do <em>nearly</em> the same thing over and over.
One obvious way to do this is to write code for the first case, then copy and
paste the code for subsequent cases, making changes as required. There are a
number of significant problems with this approach. First, it multiplies the
amount of code that a reader has to understand, and does so in a particularly
pernicious way. A reader will effectively have to play “spot the difference”
between the different code versions, and hope they don’t miss something. Second,
it makes it incredibly easy for to get confused about which version of the code
a programmer is supposed to be working on. There are few things more frustrating
than attempting to fix a bug and repeatedly seeing that nothing changes, only to
discover hours (or days) later that you have been working on the wrong piece of
nearly-identical code. Finally, lets suppose that a bug is fixed - what happens
to the near-identical clones of that code? The chance is very high that the bug
stays unfixed in those versions thereby creating yet another spot the difference
puzzle for the next person encountering a bug.</p>
<p>Abstractions are essentially tools for removing harmful repetition. For example,
it may be possible to bundle up the repeated code in a function or class, and to
encode the differences between versions in the <a class="reference external" href="https://docs.python.org/3/glossary.html#term-parameter" title="(in Python v3.10)"><span class="xref std std-term">parameters</span></a> to
the function or class constructor. If the differences between the versions of
the code require different code, as opposed to different values of some
quantities, then it may be possible to use <a class="reference internal" href="8_inheritance.html#term-inheritance"><span class="xref std std-term">inheritance</span></a> to avoid
repetition. We will return to this in <a class="reference internal" href="8_inheritance.html#inheritance"><span class="std std-numref">week 7</span></a>.</p>
</section>
</section>
<section id="comments">
<h2><span class="section-number">4.6. </span>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h2>
<p>Comments are non-code text included in programs to help explain what
they do. Since comments exist to aid understanding, some programmers
come to the conclusion that more comments imply more
understanding. Indeed, some programmers are even taught that every
line of code should have a comment. This could not be more wrong!</p>
<p>While judiciously deployed comments can be an essential aid to
understanding, too many comments can be worse than too few. If the
code is simple, elegant, and closely follows how a reader would expect
the algorithm to be written, then it will be readily understood
without comments. Conversely, attempting to rescue obscure, badly
thought-through code by writing about it is unlikely to remedy the
situation.</p>
<p>A further severe problem with comments is that they can easily become
out of date. If a piece of code is modified, it is all too easy for the
programmer to neglect to update accompanying comments. The result is
comments which explain one thing, code which does something else, and
exceptionally baffled readers.</p>
<section id="three-rules-for-commenting">
<h3><span class="section-number">4.6.1. </span>Three rules for commenting<a class="headerlink" href="#three-rules-for-commenting" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>If code is so simple, clear, and obvious that it can be easily
understood without comments, don’t comment.</p></li>
<li><p>If code is not easily understood without comments, the problem is
probably the code. Refactor the code to be simpler and easier to
understand.</p></li>
<li><p>If, and only if, you are convinced that it is strictly necessary to do
something unobvious, then do so and include a comment.</p></li>
</ol>
</section>
<section id="comment-why-not-what">
<h3><span class="section-number">4.6.2. </span>Comment why, not what<a class="headerlink" href="#comment-why-not-what" title="Permalink to this headline">¶</a></h3>
<p>Even where a comment is unavoidable, it should still usually be
obvious <em>what</em> it is that code does. It is far more likely to be
justifiable to include a comment about <em>why</em> a particular approach is
taken. For example, it might be worth commenting why an apparently
simpler alternative strategy is actually invalid.</p>
</section>
<section id="pep-8-rules-for-comments">
<h3><span class="section-number">4.6.3. </span>PEP 8 rules for comments<a class="headerlink" href="#pep-8-rules-for-comments" title="Permalink to this headline">¶</a></h3>
<p>Comments start with a single <code class="file docutils literal notranslate"><span class="pre">#</span></code> followed by a single space.
<a class="reference internal" href="#term-inline-comment"><span class="xref std std-term">Inline comments</span></a> are separated from the code by at least two spaces.</p>
<div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span><span class="c1"># No space between code and comment.</span>

<span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1">#No space between # and comment text.</span>
</pre></div>
</div>
</div>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Two spaces before #, one after.</span>
</pre></div>
</div>
</div>
<p>Each line of a block comment starts with a single <code class="file docutils literal notranslate"><span class="pre">#</span></code> indented to the same level as a
normal line of code. The <code class="file docutils literal notranslate"><span class="pre">#</span></code> is followed by a single space, unless a
particular piece of comment should be indented with respect to the paragraph it
is in, in which case additional spaces are allowed.</p>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">somecondition</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="c1"># Comment indented to the same level as the contents of the if</span>
    <span class="c1"># block.</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="docstrings">
<h2><span class="section-number">4.7. </span>Docstrings<a class="headerlink" href="#docstrings" title="Permalink to this headline">¶</a></h2>
<p>There is one enormous exception to the rule that comments should be
used only sparingly: docstrings. Docstrings (a portmanteau of
“documentation strings”) are comments at the start of modules,
classes, and functions which describe public interfaces. The entire
point of a public interface is that the programmer using it should not
have to concern themselves with how it is implemented. They should,
therefore, not need to read the code in order to understand how to use
it.</p>
<p>The <a class="reference internal" href="2_programs_in_files.html#term-Python-interpreter"><span class="xref std std-term">Python interpreter</span></a> has special support for docstrings. When a user
calls <a class="reference external" href="https://docs.python.org/3/library/functions.html#help" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">help()</span></code></a> on an <a class="reference external" href="https://docs.python.org/3/glossary.html#term-object" title="(in Python v3.10)"><span class="xref std std-term">object</span></a> (including a function or <a class="reference internal" href="3_objects.html#term-method"><span class="xref std std-term">method</span></a>)
then any docstring on that object is used as the body of the resulting help
message. Docstrings are also understood by the Python documentation generation
system, <a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx</a>. This enables
documentation webpages to be automatically generated from Python code. The
Python documentation in this course is generated by this system. For example,
recall that we met the function <a class="reference internal" href="fibonacci.html#fibonacci.fibonacci.fib" title="fibonacci.fibonacci.fib"><code class="xref py py-func docutils literal notranslate"><span class="pre">fib()</span></code></a>, which
calculates Fibonacci numbers, in <a class="reference internal" href="2_programs_in_files.html#modules"><span class="std std-numref">Section 2.5</span></a>. We can ask
<a class="reference internal" href="fibonacci.html#fibonacci.fibonacci.fib" title="fibonacci.fibonacci.fib"><code class="xref py py-func docutils literal notranslate"><span class="pre">fib()</span></code></a> for its documentation:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">fibonacci</span>
<span class="gp">In [2]: </span><span class="n">help</span><span class="p">(</span><span class="n">fibonacci</span><span class="o">.</span><span class="n">fib</span><span class="p">)</span>
</pre></div>
</div>
<p>The following is displayed:</p>
<blockquote>
<div><p>Help on function fib in module fibonacci.fibonacci:</p>
<dl class="simple">
<dt>fib(n)</dt><dd><p>Return the n-th Fibonacci number.</p>
</dd>
</dl>
</div></blockquote>
<p>There is also a specific IPython help extension, which also works in Jupyter
notebooks (IPython and Jupyter are related projects). Appending a question mark
<kbd class="kbd docutils literal notranslate">?</kbd> to an object name prints a slightly different version of the help information:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span>fibonacci.fib<span class="o">?</span>
<span class="go">Signature: fibonacci.fib(n)</span>
<span class="go">Docstring: Return the n-th Fibonacci number.</span>
<span class="go">File:      ~/docs/principles_of_programming/object-oriented-programming/fibonacci/fibonacci.py</span>
<span class="go">Type:      function</span>
</pre></div>
</div>
<p>Finally, the same information is used in the <a class="reference internal" href="fibonacci.html#fibonacci.fibonacci.fib" title="fibonacci.fibonacci.fib"><code class="xref py py-func docutils literal notranslate"><span class="pre">web</span> <span class="pre">documentation</span></code></a>. Notice that the <a class="reference internal" href="#term-function-signature"><span class="xref std std-term">function signature</span></a> is not a
part of the docstring. Python is capable of extracting the signature of the
function and adding it into the documentation without the programmer having to
manually add it to the docstring.</p>
<section id="where-to-use-docstrings">
<h3><span class="section-number">4.7.1. </span>Where to use docstrings<a class="headerlink" href="#where-to-use-docstrings" title="Permalink to this headline">¶</a></h3>
<p>Every public module, class, function, and method should have a docstring.
“Public” in this context means any code which is intended to be accessed from
outside the <a class="reference internal" href="2_programs_in_files.html#modules"><span class="std std-ref">module</span></a> in which it is defined.</p>
</section>
<section id="docstring-conventions">
<h3><span class="section-number">4.7.2. </span>Docstring conventions<a class="headerlink" href="#docstring-conventions" title="Permalink to this headline">¶</a></h3>
<p>Python itself doesn’t know anything about docstring contents, it will simply
display the docstring when you ask for help. However, other tools such as those
that generate websites from documentation depend on you following the
conventions.</p>
<p>By convention, docstrings are delimited by three double quote characters (<code class="xref py py-obj docutils literal notranslate"><span class="pre">&quot;&quot;&quot;</span></code>).</p>
</section>
<section id="short-docstrings">
<h3><span class="section-number">4.7.3. </span>Short docstrings<a class="headerlink" href="#short-docstrings" title="Permalink to this headline">¶</a></h3>
<p>Simple functions which take one or two arguments can be documented with a single
line docstring which simply says what the function does. The Fibonacci example above
is a typical case. The single line should be an imperative sentence and end with
a full stop.</p>
<div class="badcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="s2">&quot;Return the n-th Fibonacci number&quot;</span> <span class="c1"># Single quotes, missing full stop.</span>

<span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the n-th Fibonacci number.&quot;&quot;&quot;</span> <span class="c1"># Sentence not imperative.</span>

<span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;fib(n)</span>
<span class="sd">    Return the n-th Fibonacci number.&quot;&quot;&quot;</span> <span class="c1"># Don&#39;t include the function signature.</span>
</pre></div>
</div>
</div>
<div class="goodcode docutils container">
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the n-th Fibonacci number.&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
</section>
<section id="long-docstrings">
<h3><span class="section-number">4.7.4. </span>Long docstrings<a class="headerlink" href="#long-docstrings" title="Permalink to this headline">¶</a></h3>
<p>Conversely, a more complex object will require much more information in its
docstring. Consider <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a> (click on the link for the
documentation). The web documentation, also generated from the docstring, needs
to cover 5 parameters, and detail the return type. It also contains several
examples, references to other functions, and an explanatory note. This is an
example of very good documentation.</p>
<p>There is no widely used official standard for the layout of a long docstring,
but there are two project or institution-based conventions that are recognised
by the web documentation system. One from <a class="reference external" href="https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings">Google</a>
and the other from the <a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/format.html">Numpy</a> project. You should
consistently use one of these styles across a whole project. Clearly if you are
contributing code to an existing project then you should follow their style.</p>
</section>
<section id="enforcing-docstring-conventions-in-flake8">
<h3><span class="section-number">4.7.5. </span>Enforcing docstring conventions in Flake8<a class="headerlink" href="#enforcing-docstring-conventions-in-flake8" title="Permalink to this headline">¶</a></h3>
<p>The core Flake8 package does not enforce docstring conventions, but there is an
additional package <code class="xref py py-mod docutils literal notranslate"><span class="pre">flake8-docstrings</span></code> which will do this for you. This is
installed using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python -m pip install flake8-docstrings
</pre></div>
</div>
<p>Because there is more than one convention for long docstrings, this package
needs a little bit of configuration. You can select the docstring convention on
the command line:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>flake8 --docstring-convention numpy
</pre></div>
</div>
<p>or by saving the configuration option in a config file. For example you can add
a file <code class="file docutils literal notranslate"><span class="pre">setup.cfg</span></code> alongside <code class="file docutils literal notranslate"><span class="pre">setup.py</span></code> at the top of your git
repository, and include the following:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">flake8</span><span class="p">]</span>
<span class="n">docstring</span><span class="o">-</span><span class="n">convention</span><span class="o">=</span><span class="n">numpy</span>
</pre></div>
</div>
<p>Alternative specifications for docstring conventions that are supported are
<code class="xref py py-obj docutils literal notranslate"><span class="pre">google</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">pep257</span></code>.</p>
</section>
</section>
<section id="a-brief-diversion-into-cellular-automata">
<h2><span class="section-number">4.8. </span>A brief diversion into cellular automata<a class="headerlink" href="#a-brief-diversion-into-cellular-automata" title="Permalink to this headline">¶</a></h2>
<p>We’ll now take a brief diversion into a completely different area of
mathematics: cellular automata. This is entirely irrelevant to the contents of
this course, except that it provides a useful and, hopefully, interesting basis
for this week’s exercises. <a class="reference external" href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">The game of life</a> is a mathematical
system invented by the mathematician <a class="reference external" href="https://en.wikipedia.org/wiki/John_Horton_Conway">John Horton Conway FRS</a> in 1970. The board of the
game is a grid of squares, like an infinite piece of graph paper (though we’ll
only work with finite boards, since our computers have finite memory). Each cell
on the board is either alive (value 1) or dead (value 0). The only human
interaction is to set the initial state of every square on the board to either
alive or dead. The game then proceeds as a series of steps. At each step the new
state of the board is calculated according to these rules:</p>
<ol class="arabic simple" start="0">
<li><p>The neighbours of a square are the 8 immediately surrounding squares.</p></li>
<li><p>Any square with exactly 3 live neighbours at the old step is live at the new
step.</p></li>
<li><p>Any square which is alive at the old step and has exactly 2 live neighbours
at the old step remains alive at the new step.</p></li>
<li><p>All other squares on the board at the new step are dead.</p></li>
</ol>
<p>Using only these three rules, an amazingly complex array of behaviour can be
generated, depending only on the pattern of cells which starts off alive.
For example there are patterns of cells which are fixed, called “rocks”,
“gliders” that fly across the board and “oscillators” which repeatedly switch
between a few states. It’s simultaneously a fun toy and an important piece of
mathematics. For example, it’s possible to prove that any algorithm that can be
executed on any computer can be represented by a suitable pattern of game of
life cells, and running the game will execute the algorithm.</p>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="_images/glider_gun.png"><img alt="_images/glider_gun.png" src="_images/glider_gun.png" style="width: 40%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 4.1 </span><span class="caption-text">Snapshot of the Game of Life at one step. The black squares are live and the
white ones are dead. Two gliders can be seen moving across the board at (25,
12) and (33, 19).</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="glossary">
<h2><span class="section-number">4.9. </span>Glossary<a class="headerlink" href="#glossary" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="glossary simple">
<dt id="term-block-comment">block comment<a class="headerlink" href="#term-block-comment" title="Permalink to this term">¶</a></dt><dd><p>A comment which is the only text on one or more lines of code. Block
comments are typically used to describe the code that follows them.</p>
</dd>
<dt id="term-docstring">docstring<a class="headerlink" href="#term-docstring" title="Permalink to this term">¶</a></dt><dd><p>A literal <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">string</span></code></a> included at the start of a module, class or
function which documents that code object.</p>
</dd>
<dt id="term-function-signature">function signature<a class="headerlink" href="#term-function-signature" title="Permalink to this term">¶</a></dt><dd><p>The signature of a function is the name of the function and the
arguments that it takes. The function signature is the basic information
needed in order to know how to call that function.</p>
</dd>
<dt id="term-inline-comment">inline comment<a class="headerlink" href="#term-inline-comment" title="Permalink to this term">¶</a></dt><dd><p>A comment which follows active code on a line. Inline comments are used
to make a very brief clarification of the code on that line.</p>
</dd>
<dt id="term-modularity">modularity<a class="headerlink" href="#term-modularity" title="Permalink to this term">¶</a></dt><dd><p>The design principle that programs should be broken into small,
easily understandable units, which communicate with each other
through clearly specified interfaces.</p>
</dd>
<dt id="term-parsimony">parsimony<a class="headerlink" href="#term-parsimony" title="Permalink to this term">¶</a></dt><dd><p>The design principle that unnecessary code, names, and objects
should be avoided.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="exercises">
<h2><span class="section-number">4.10. </span>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h2>
<div class="proof proof-type-exercise" id="id5">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.2</span>
        
    </div><div class="proof-content">
<p>Install flake8, pep8-naming, and flake8-docstrings.
Configure your Python editor to use flake8.</p>
</div></div><p>The <a class="reference external" href="https://classroom.github.com/a/AkcoAOIj">skeleton code for this week’s exercises on GitHub Classroom</a> contains a package <code class="xref py py-mod docutils literal notranslate"><span class="pre">life</span></code>
which implements Conway’s Game of Life. Accept the assignment, and clone the
repository. Install the package in editable mode. This will also install some
additional packages that the <code class="xref py py-mod docutils literal notranslate"><span class="pre">life</span></code> package depends on. This is achieved
using an additional argument to <code class="xref py py-func docutils literal notranslate"><span class="pre">setuptools.setup()</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-number">Listing 4.1 </span><span class="caption-text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setup.py</span></code> for the <code class="xref py py-mod docutils literal notranslate"><span class="pre">life</span></code> package. The <code class="xref py py-obj docutils literal notranslate"><span class="pre">install_requires</span></code>
parameter is used to install other packages that <code class="xref py py-mod docutils literal notranslate"><span class="pre">life</span></code> needs.</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>
<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;life&quot;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;0.1&quot;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(),</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;matplotlib&quot;</span><span class="p">,</span>
        <span class="s2">&quot;scipy&quot;</span><span class="p">,</span>
        <span class="s2">&quot;numpy&quot;</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>A couple of example scripts are provided which demonstrate the game of life.
This one shows a glider flying across the board:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python scripts/glider.py
</pre></div>
</div>
<p>Running the script will pop up a window showing the board. If Visual Studio Code
is in full screen mode then that pop-up might appear on a different screen. It’s
therefore a good idea to unmaximise Visual Studio Code before running the
script.</p>
<p>This script shows a <a class="reference external" href="https://en.wikipedia.org/wiki/Gun_(cellular_automaton)">glider gun</a>, which generates a
neverending sequence of gliders:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python scripts/glider_gun.py
</pre></div>
</div>
<div class="proof proof-type-exercise" id="id7">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.3</span>
        
    </div><div class="proof-content">
<p>The author of the <code class="xref py py-mod docutils literal notranslate"><span class="pre">life</span></code> package had clearly never heard of PEP 8: the
style of the code is awful. Fix the style in the package so that there are
no Flake8 errors. Among other things, you will need to write docstrings for
all of the methods. The configuration file in the skeleton code sets the
convention to Numpy, but actually you should only need short docstrings in
this case so this won’t make a difference.</p>
</div></div><div class="proof proof-type-exercise" id="id8">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.4</span>
        
    </div><div class="proof-content">
<figure class="align-right" id="id9">
<a class="reference internal image-reference" href="_images/glider.png"><img alt="_images/glider.png" src="_images/glider.png" style="height: 10em;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 4.2 </span><span class="caption-text">An upright glider, live squares in black.</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>A pattern such as a glider clearly maintains its behaviour if translated,
reflected or rotated.</p>
<ol class="arabic simple">
<li><p>Add a class <code class="xref py py-class docutils literal notranslate"><span class="pre">Pattern</span></code> to <code class="xref py py-mod docutils literal notranslate"><span class="pre">life.life</span></code>. The <a class="reference internal" href="3_objects.html#term-constructor"><span class="xref std std-term">constructor</span></a> should
take in a <a class="reference external" href="https://numpy.org/doc/stable/reference/index.html#module-numpy" title="(in NumPy v1.22)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code></a> array containing a pattern of 1s and 0s, and
assign it to the <a class="reference internal" href="3_objects.html#term-attribute"><span class="xref std std-term">attribute</span></a> <code class="xref py py-obj docutils literal notranslate"><span class="pre">grid</span></code>.</p></li>
<li><p>Add <code class="xref py py-class docutils literal notranslate"><span class="pre">Pattern</span></code> to the <a class="reference external" href="https://docs.python.org/3/reference/simple_stmts.html#import" title="(in Python v3.10)"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">import</span></code></a> statement in
<code class="xref py py-mod docutils literal notranslate"><span class="pre">life.__init__</span></code>.</p></li>
</ol>
<figure class="align-right" id="id10">
<a class="reference internal image-reference" href="_images/glider_v.png"><img alt="_images/glider_v.png" src="_images/glider_v.png" style="height: 10em;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 4.3 </span><span class="caption-text">Vertically flipped glider.</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<ol class="arabic" start="3">
<li><p>Add a <a class="reference internal" href="3_objects.html#term-method"><span class="xref std std-term">method</span></a> <code class="xref py py-meth docutils literal notranslate"><span class="pre">flip_vertical()</span></code> which returns a new
<code class="xref py py-class docutils literal notranslate"><span class="pre">Pattern</span></code> whose rows are in reversed order, so that the pattern
is upside down.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>A slice of the form <code class="xref py py-obj docutils literal notranslate"><span class="pre">::-1</span></code> returns that dimension of an array in
reverse order.</p>
</div>
</li>
</ol>
<figure class="align-right" id="id11">
<a class="reference internal image-reference" href="_images/glider_h.png"><img alt="_images/glider_h.png" src="_images/glider_h.png" style="height: 10em;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 4.4 </span><span class="caption-text">Horizontally flipped glider.</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<ol class="arabic simple" start="4">
<li><p>Add a <a class="reference internal" href="3_objects.html#term-method"><span class="xref std std-term">method</span></a> <code class="xref py py-meth docutils literal notranslate"><span class="pre">flip_horizontal()</span></code> which returns a new
<code class="xref py py-class docutils literal notranslate"><span class="pre">Pattern</span></code> whose rows are in reversed order, so that the pattern
is reversed left-right.</p></li>
</ol>
<figure class="align-right" id="id12">
<a class="reference internal image-reference" href="_images/glider_t.png"><img alt="_images/glider_t.png" src="_images/glider_t.png" style="height: 10em;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 4.5 </span><span class="caption-text">Transposed glider.</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<ol class="arabic" start="5">
<li><p>Add a <a class="reference internal" href="3_objects.html#term-method"><span class="xref std std-term">method</span></a> <code class="xref py py-meth docutils literal notranslate"><span class="pre">flip_diag()</span></code> which returns a new pattern which
is the transpose of the original.</p></li>
<li><p>Add a <a class="reference internal" href="3_objects.html#term-method"><span class="xref std std-term">method</span></a> <code class="xref py py-meth docutils literal notranslate"><span class="pre">rotate()</span></code> with a <a class="reference external" href="https://docs.python.org/3/glossary.html#term-parameter" title="(in Python v3.10)"><span class="xref std std-term">parameter</span></a> <code class="xref py py-obj docutils literal notranslate"><span class="pre">n</span></code>.
This should return a new <code class="xref py py-class docutils literal notranslate"><span class="pre">Pattern</span></code> which is the original pattern
rotated through <code class="xref py py-obj docutils literal notranslate"><span class="pre">n</span></code> right angles anticlockwise.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>A rotation is the composition of a transpose and a reflection.</p>
</div>
</li>
</ol>
<figure class="align-center" id="id13">
<a class="reference internal image-reference" href="_images/glider_r.png"><img alt="_images/glider_r.png" src="_images/glider_r.png" style="height: 10em;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 4.6 </span><span class="caption-text">Gliders rotated by 1, 2, and 3 right angles anticlockwise.</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</div></div><div class="proof proof-type-exercise" id="id14">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.5</span>
        
    </div><div class="proof-content">
<p>Add a method <code class="xref py py-meth docutils literal notranslate"><span class="pre">insert()</span></code> to the <code class="xref py py-class docutils literal notranslate"><span class="pre">Game</span></code> class. This should take two
parameters, a <code class="xref py py-class docutils literal notranslate"><span class="pre">Pattern</span></code> and a pair of integers representing a square
on the game board. The method should modify the game board so as to insert
the pattern provided at a location centred on the location given by the pair
of integers.</p>
<figure class="align-center" id="id15">
<a class="reference internal image-reference" href="_images/glider_inserted.png"><img alt="_images/glider_inserted.png" src="_images/glider_inserted.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 4.7 </span><span class="caption-text">A glider inserted at the location (2, 5) (highlighted in orange).</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</div></div><p>Once you have completed the exercises, the third script provided will work. This
sets up two gliders which collide and eventually turn into a pattern of six
oscillating blinkers:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python scripts/two_gliders.py
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use this example in the quiz:</p>
<p>False if src_petsc4py_exists and args.honour_petsc_dir else True</p>
</div>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="pep"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p>PEP stands for “Python Enhancement Proposal”. PEPs describe
everything from code style to voting algorithms among Python
developers. Their main purpose, as the name suggests, is to
document proposals for changes to the Python language. As
such, they are usually of little interest to most Python
users. However the PEPs having to do with style have wider
significance.</p>
</dd>
</dl>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019-2021, David A. Ham. Modified by Patrick E. Farrell.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>
  </body>
</html>