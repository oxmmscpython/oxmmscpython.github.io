
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Further object-oriented features &#8212; Object oriented programming in Python for mathematicians 2021.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/fenics.css" />
    <link rel="stylesheet" type="text/css" href="_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/proof.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0EFVH5C4DC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0EFVH5C4DC');
</script>
<link rel="stylesheet" href="_static/featured.css">


<link rel="shortcut icon" href="_static/icon.ico" />


  </head><body>
<div class="wrapper">
  <div id="access">
    <div class="menu">
      <ul>
          <li class="page_item"><a href="https://github.com/oxmmscpython/object-oriented-programming" title="GitHub">GitHub</a></li>
      </ul>
    </div><!-- .menu -->
  </div><!-- #access -->
</div><!-- #wrapper -->


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="further-object-oriented-features">
<h1>Further object-oriented features<a class="headerlink" href="#further-object-oriented-features" title="Permalink to this headline">¶</a></h1>
<p>This week we’ll tie up a few loose ends by examining in detail some programming
concepts and Python features which we have encountered but not really studied
in the course so far.</p>
<section id="decorators">
<span id="id1"></span><h2>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h2>
<details class="sphinx-bs dropdown card mb-3">
<summary class="summary-title card-header">
Video: decorators.<div class="summary-down docutils">
<svg version="1.1" width="24" height="24" class="octicon octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="summary-up docutils">
<svg version="1.1" width="24" height="24" class="octicon octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<div class="vimeo docutils container">
<iframe src="https://player.vimeo.com/video/526946976"
frameborder="0" allow="autoplay; fullscreen"
allowfullscreen></iframe></div>
</div>
</details><p>In <a class="reference internal" href="10_trees_and_directed_acyclic_graphs.html#trees"><span class="std std-numref">Week 9</span></a> we encountered the
<a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.singledispatch" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.singledispatch()</span></code></a> decorator, which turns a function into a
<a class="reference internal" href="10_trees_and_directed_acyclic_graphs.html#term-single-dispatch-function"><span class="xref std std-term">single dispatch function</span></a>. More generally, a decorator is a function
which takes in a function and returns another function. In other words, the
following:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@dec</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>is equivalent to:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
    <span class="o">...</span>
<span class="n">func</span> <span class="o">=</span> <span class="n">dec</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</pre></div>
</div>
<p>Decorators are therefore merely <a class="reference internal" href="#term-syntactic-sugar"><span class="xref std std-term">syntactic sugar</span></a>, but can be very useful
in removing the need for boiler-plate code at the top of functions. For
example, your code for <a class="reference internal" href="10_trees_and_directed_acyclic_graphs.html#ex-expr"><span class="std std-numref">Exercise 9.6</span></a> probably contains a lot
of repeated code a lot like the following:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the Expr for the sum of this Expr and another.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">):</span>
        <span class="n">other</span> <span class="o">=</span> <span class="n">Number</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</pre></div>
</div>
<p>We could define a decorator to clean up this code as follows:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<span id="eg-decorator"></span><div class="code-block-caption"><span class="caption-text">A <a class="reference internal" href="#term-decorator"><span class="xref std std-term">decorator</span></a> which casts the second argument of a method
to an <code class="xref py py-obj docutils literal notranslate"><span class="pre">expressions.Number</span></code> if that argument is a number.</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="k">def</span> <span class="nf">make_other_expr</span><span class="p">(</span><span class="n">meth</span><span class="p">):</span>
<span class="linenos"> 4</span>    <span class="sd">&quot;&quot;&quot;Cast the second argument of a method to Number when needed.&quot;&quot;&quot;</span>
<span class="linenos"> 5</span>    <span class="nd">@wraps</span><span class="p">(</span><span class="n">meth</span><span class="p">)</span>
<span class="linenos"> 6</span>    <span class="k">def</span> <span class="nf">fn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="linenos"> 7</span>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">):</span>
<span class="linenos"> 8</span>            <span class="n">other</span> <span class="o">=</span> <span class="n">Number</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
<span class="linenos"> 9</span>        <span class="k">return</span> <span class="n">meth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
<span class="linenos">10</span>    <span class="k">return</span> <span class="n">fn</span>
</pre></div>
</div>
</div>
<p>Now, each time we write one of the special methods of <code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code>, we can
instead write something like the following:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@make_other_expr</span>
<span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the Expr for the sum of this Expr and another.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</pre></div>
</div>
<p>Let’s look closely at what the decorator in <code class="xref std std-numref docutils literal notranslate"><span class="pre">eg_decorator</span></code> does. The
decorator takes in one function, <code class="xref py py-func docutils literal notranslate"><span class="pre">meth()</span></code> an returns another one
<code class="xref py py-func docutils literal notranslate"><span class="pre">fn()</span></code>. Notice that we let <code class="xref py py-func docutils literal notranslate"><span class="pre">fn()</span></code> take the same arguments as
<code class="xref py py-func docutils literal notranslate"><span class="pre">meth()</span></code>. If you wanted to write a more generic decorator that worked on
functions with different signatures, then you could define function as
<code class="xref py py-obj docutils literal notranslate"><span class="pre">fn(*args,</span> <span class="pre">**kwargs)</span></code> and pass these through to <code class="xref py py-func docutils literal notranslate"><span class="pre">meth()</span></code>.</p>
<p>The contents of <code class="xref py py-func docutils literal notranslate"><span class="pre">fn()</span></code> are what will be executed every time <code class="xref py py-func docutils literal notranslate"><span class="pre">meth()</span></code> is
called. So here we check the type of <code class="xref py py-data docutils literal notranslate"><span class="pre">other</span></code> and cast it to
<code class="xref py py-class docutils literal notranslate"><span class="pre">Number</span></code>, and then call the original <code class="xref py py-func docutils literal notranslate"><span class="pre">meth()</span></code> on the modified arguments.
We could also execute code that acts on the value that <code class="xref py py-func docutils literal notranslate"><span class="pre">meth()</span></code> returns. To
do this we would assign the result of <code class="xref py py-func docutils literal notranslate"><span class="pre">meth()</span></code> to a variable and then
include more code after line 9.</p>
<p>Finally, notice that we have wrapped <code class="xref py py-obj docutils literal notranslate"><span class="pre">fn</span></code> in another decorator, this time
<a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.wraps" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.wraps()</span></code></a>. The purpose of this decorator is to copy the name and
docstring from <code class="xref py py-func docutils literal notranslate"><span class="pre">meth()</span></code> to <code class="xref py py-func docutils literal notranslate"><span class="pre">fn()</span></code>. The effect of this is that if the
user calls <a class="reference external" href="https://docs.python.org/3/library/functions.html#help" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">help()</span></code></a> on a decorated function then they will see the name and
docstring for the original function, and not that of the decorator.</p>
<section id="decorators-which-take-arguments">
<h3>Decorators which take arguments<a class="headerlink" href="#decorators-which-take-arguments" title="Permalink to this headline">¶</a></h3>
<p>Our <code class="xref py py-func docutils literal notranslate"><span class="pre">make_other_expr()</span></code> decorator doesn’t have brackets after its name, and doesn’t
take any arguments. However <a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.wraps" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.wraps()</span></code></a> does have brackets, and takes a
function name as an argument. How does this work? The answer is yet another
wrapper function. A decorator is a function which takes a function and
returns a function. <a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.wraps" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.wraps()</span></code></a> takes an argument (it happens to be
a function but other decorators take other types) and returns a decorator
function. That is, it is a function which takes in arguments and returns a
function which takes a function and returns a function. It’s functions all the
way down!</p>
</section>
<section id="the-property-decorator">
<h3>The property decorator<a class="headerlink" href="#the-property-decorator" title="Permalink to this headline">¶</a></h3>
<p>Back in <a class="reference internal" href="3_objects.html#objects"><span class="std std-numref">Week 3</span></a>, we gave the
<a class="reference internal" href="example_code.html#example_code.polynomial.Polynomial" title="example_code.polynomial.Polynomial"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polynomial</span></code></a> class a
<a class="reference internal" href="example_code.html#example_code.polynomial.Polynomial.degree" title="example_code.polynomial.Polynomial.degree"><code class="xref py py-meth docutils literal notranslate"><span class="pre">degree()</span></code></a> method:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">degree</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coefficients</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
</pre></div>
</div>
<p>This enables the following code to work:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">example_code.polynomial</span> <span class="kn">import</span> <span class="n">Polynomial</span>

<span class="gp">In [2]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">Polynomial</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="gp">In [3]: </span><span class="n">p</span><span class="o">.</span><span class="n">degree</span><span class="p">()</span>
<span class="gh">Out[3]: </span><span class="go">2</span>
</pre></div>
</div>
<p>However, the empty brackets at the end of <code class="xref py py-func docutils literal notranslate"><span class="pre">degree()</span></code> are a bit clunky: why
should we have to provide empty brackets if there are no arguments to pass?
Indeed, this represents a failure of <a class="reference internal" href="3_objects.html#term-encapsulation"><span class="xref std std-term">encapsulation</span></a>, because we
shouldn’t know or care from the outside whether
meth:<a class="reference internal" href="example_code.html#example_code.polynomial.Polynomial.degree" title="example_code.polynomial.Polynomial.degree"><code class="xref py py-obj docutils literal notranslate"><span class="pre">degree()</span></code></a> is a <a class="reference internal" href="3_objects.html#term-method"><span class="xref std std-term">method</span></a> or a
<a class="reference internal" href="3_objects.html#term-data-attribute"><span class="xref std std-term">data attribute</span></a>. Indeed, the developer of the
<a class="reference internal" href="example_code.html#module-example_code.polynomial" title="example_code.polynomial"><code class="xref py py-mod docutils literal notranslate"><span class="pre">polynomial</span></code></a> module should be able to change that
implementation without changing the interface. This is where the
built-in <a class="reference external" href="https://docs.python.org/3/library/functions.html#property" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">property</span></code></a> decorator comes in. <a class="reference external" href="https://docs.python.org/3/library/functions.html#property" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">property</span></code></a> transforms
methods that take no arguments other than the object itself into attributes.
So, if we had instead defined:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">degree</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coefficients</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Then <code class="xref py py-obj docutils literal notranslate"><span class="pre">degree</span></code> would be accessible as an <a class="reference internal" href="3_objects.html#term-attribute"><span class="xref std std-term">attribute</span></a>:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">example_code.polynomial</span> <span class="kn">import</span> <span class="n">Polynomial</span>

<span class="gp">In [2]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">Polynomial</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="gp">In [3]: </span><span class="n">p</span><span class="o">.</span><span class="n">degree</span>
<span class="gh">Out[3]: </span><span class="go">2</span>
</pre></div>
</div>
</section>
<section id="the-functools-module">
<h3>The <a class="reference external" href="https://docs.python.org/3/library/functools.html#module-functools" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">functools</span></code></a> module<a class="headerlink" href="#the-functools-module" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://docs.python.org/3/library/functools.html#module-functools" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">functools</span></code></a> module is part of the <a class="reference external" href="https://docs.python.org/3/library/index.html#library-index" title="(in Python v3.10)"><span class="xref std std-ref">Python Standard Library</span></a>. It provides a collection of core <a class="reference internal" href="#term-higher-order-function"><span class="xref std std-term">higher order
functions</span></a>, some of which we have already met earlier
in the course. Since decorators are an important class of higher order
function, it is unsurprising that <a class="reference external" href="https://docs.python.org/3/library/functools.html#module-functools" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">functools</span></code></a> provides several very useful
ones. We will survey just a few here:</p>
<dl class="simple">
<dt><a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.cache" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">functools.cache</span></code></a></dt><dd><p>Some functions can be very expensive to compute, and may be called
repeatedly. A cache stores the results of previous function calls. If the
function is called again with a combination of argument values that have
previously been used, the function result is returned from the cache
instead of the function being called again. This is a trade-off of
execution time against memory usage, so one has to be careful how much
memory will be consumed by the cache.</p>
</dd>
<dt><a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.lru_cache" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">functools.lru_cache</span></code></a></dt><dd><p>A least recently used cache is a limited size cache where the least
recently accessed items will be discarded if the cache is full. This has
the advantage that the memory usage is bounded, but the drawback that cache
eviction may take time, and that more recomputation may occur than in an
unbounded cache.</p>
</dd>
<dt><a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.singledispatch" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">functools.singledispatch</span></code></a></dt><dd><p>We met this in <a class="reference internal" href="10_trees_and_directed_acyclic_graphs.html#trees"><span class="std std-numref">Week 9</span></a>. This decorator transforms a
function into a <a class="reference internal" href="10_trees_and_directed_acyclic_graphs.html#term-single-dispatch-function"><span class="xref std std-term">single dispatch function</span></a>.</p>
</dd>
</dl>
</section>
</section>
<section id="abstract-base-classes">
<span id="id2"></span><h2>Abstract base classes<a class="headerlink" href="#abstract-base-classes" title="Permalink to this headline">¶</a></h2>
<details class="sphinx-bs dropdown card mb-3">
<summary class="summary-title card-header">
Video: Abstract base classes.<div class="summary-down docutils">
<svg version="1.1" width="24" height="24" class="octicon octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="summary-up docutils">
<svg version="1.1" width="24" height="24" class="octicon octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<div class="vimeo docutils container">
<iframe src="https://player.vimeo.com/video/526947635"
frameborder="0" allow="autoplay; fullscreen"
allowfullscreen></iframe></div>
</div>
</details><p>We have now on several occasions encountered classes which are not designed to
be instantiated themselves, but merely serve as parent classes to concrete
classes which are intended to be instantiated. Examples of these classes
include <a class="reference external" href="https://docs.python.org/3/library/numbers.html#numbers.Number" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numbers.Number</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">example_code.groups.Group</span></code>, and the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Expr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Operator</span></code>, and <code class="xref py py-class docutils literal notranslate"><span class="pre">Terminal</span></code> classes from
<a class="reference internal" href="10_trees_and_directed_acyclic_graphs.html#trees"><span class="std std-numref">Week 9</span></a>. These classes that are only ever parents are called
<a class="reference internal" href="#term-abstract-base-class"><span class="xref std std-term">abstract base classes</span></a>. They are abstract in the
sense that they define (some of the) properties of their children, but without
providing full implementations of them. They are base classes in the sense that
they are intended to be inherited from.</p>
<p>Abstract base classes typically fulfil two related roles, they provide
the definition of an interface that child classes can be assumed to follow, and
they provide a useful way of checking that an object of a concrete class has
particular properties.</p>
<section id="the-abc-module">
<h3>The <a class="reference external" href="https://docs.python.org/3/library/abc.html#module-abc" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abc</span></code></a> module<a class="headerlink" href="#the-abc-module" title="Permalink to this headline">¶</a></h3>
<p>The concept of an abstract base class is itself an abstraction: an
abstract base class is simply a class which is designed not to be instantiated.
This requires no support from particular language features. Nonetheless, there
are features that a language can provide which makes the creation of useful
abstract base classes easy. In Python, these features are provided by the
<a class="reference external" href="https://docs.python.org/3/library/abc.html#module-abc" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abc</span></code></a> module in the <a class="reference external" href="https://docs.python.org/3/library/index.html#library-index" title="(in Python v3.10)"><span class="xref std std-ref">Standard Library</span></a>.</p>
<p>The <a class="reference external" href="https://docs.python.org/3/library/abc.html#module-abc" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abc</span></code></a> module provides the <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></a> class. This is itself an
abstract base class: there is no need to ever make an object of type
<a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></a>. Instead, classes inherit from <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></a> in order to
access features that it provides.</p>
</section>
<section id="abstract-methods">
<h3>Abstract methods<a class="headerlink" href="#abstract-methods" title="Permalink to this headline">¶</a></h3>
<p>Let’s look back at the groups example from <a class="reference internal" href="8_inheritance.html#inheritance"><span class="std std-numref">Week 7</span></a>. We
defined the base <code class="xref py py-class docutils literal notranslate"><span class="pre">Group</span></code> class and specified that
child classes had to implement the <code class="xref py py-meth docutils literal notranslate"><span class="pre">_validate()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">operator()</span></code>
methods as well as the <code class="xref py py-attr docutils literal notranslate"><span class="pre">symbol</span></code> <a class="reference internal" href="8_inheritance.html#term-class-attribute"><span class="xref std std-term">class attribute</span></a>. But how should
we actually know that these methods and attribute are required? This might be
documented, but that is somewhat hit and miss: it is often less than
completely obvious where to look for the documentation. Abstract methods
provide a much more satisfactory solution to this problem. The
<code class="xref py py-mod docutils literal notranslate"><span class="pre">example_code.groups_abc</span></code> module is an update of the
<code class="xref py py-mod docutils literal notranslate"><span class="pre">example_code.groups</span></code> module which uses the <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></a> class.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<span id="groups-abc"></span><div class="code-block-caption"><span class="caption-text">An abstract base class version of the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Group</span></code> class. Note that the class itself
inherits from <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></a>, and the methods and attribute to be
implemented by the <a class="reference internal" href="8_inheritance.html#term-child-class"><span class="xref std std-term">child classes</span></a> have the
<a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.abstractmethod" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">abstractmethod</span></code></a> decorator.</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="k">class</span> <span class="nc">Group</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="linenos"> 4</span>    <span class="sd">&quot;&quot;&quot;A base class containing methods common to many groups.</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="sd">    Each subclass represents a family of parametrised groups.</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="sd">    Parameters</span>
<span class="linenos"> 9</span><span class="sd">    ----------</span>
<span class="linenos">10</span><span class="sd">    n: int</span>
<span class="linenos">11</span><span class="sd">        The primary group parameter, such as order or degree. The</span>
<span class="linenos">12</span><span class="sd">        precise meaning of n changes from subclass to subclass.</span>
<span class="linenos">13</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos">14</span>
<span class="linenos">15</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="linenos">16</span>        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>
<span class="linenos">17</span>
<span class="linenos">18</span>    <span class="nd">@property</span>
<span class="linenos">19</span>    <span class="nd">@abstractmethod</span>
<span class="linenos">20</span>    <span class="k">def</span> <span class="nf">symbol</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">21</span>        <span class="sd">&quot;&quot;&quot;Represent the group name as a character.&quot;&quot;&quot;</span>
<span class="linenos">22</span>        <span class="k">pass</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="nd">@abstractmethod</span>
<span class="linenos">25</span>    <span class="k">def</span> <span class="nf">_validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="linenos">26</span>        <span class="sd">&quot;&quot;&quot;Ensure that value is a legitimate element value in this group.&quot;&quot;&quot;</span>
<span class="linenos">27</span>        <span class="k">pass</span>
<span class="linenos">28</span>
<span class="linenos">29</span>    <span class="nd">@abstractmethod</span>
<span class="linenos">30</span>    <span class="k">def</span> <span class="nf">operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="linenos">31</span>        <span class="sd">&quot;&quot;&quot;Return a ⊙ b using the group operation ⊙.&quot;&quot;&quot;</span>
<span class="linenos">32</span>        <span class="k">pass</span>
<span class="linenos">33</span>
<span class="linenos">34</span>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="linenos">35</span>        <span class="sd">&quot;&quot;&quot;Create an element of this group.&quot;&quot;&quot;</span>
<span class="linenos">36</span>        <span class="k">return</span> <span class="n">Element</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="linenos">37</span>
<span class="linenos">38</span>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">39</span>        <span class="sd">&quot;&quot;&quot;Return a string in the form symbol then group parameter.&quot;&quot;&quot;</span>
<span class="linenos">40</span>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="linenos">41</span>
<span class="linenos">42</span>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">43</span>        <span class="sd">&quot;&quot;&quot;Return the canonical string representation of the element.&quot;&quot;&quot;</span>
<span class="linenos">44</span>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
</pre></div>
</div>
</div>
<p>There are a few features of <code class="xref std std-numref docutils literal notranslate"><span class="pre">groups_abc</span></code> which are noteworthy. First,
observe that <code class="xref py py-class docutils literal notranslate"><span class="pre">Group</span></code> now inherits from
<a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></a>. This simply enables the features that we will use next.
The new <code class="xref py py-class docutils literal notranslate"><span class="pre">Group</span></code> class has
<code class="xref py py-meth docutils literal notranslate"><span class="pre">_validate()</span></code> and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">operator()</span></code> methods, but these don’t
actually do anything (their contents are merely <a class="reference external" href="https://docs.python.org/3/reference/simple_stmts.html#pass" title="(in Python v3.10)"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">pass</span></code></a>). They are,
however, decorated with <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.abstractmethod" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">abstractmethod</span></code></a>. The effect of this decorator can
be observed if we try to instantiate <code class="xref py py-class docutils literal notranslate"><span class="pre">Group</span></code>:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">example_code.groups_abc</span> <span class="kn">import</span> <span class="n">Group</span>

<span class="gp">In [2]: </span><span class="n">Group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">76</span><span class="n">d67216101e</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">Group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="ne">TypeError</span>: Can&#39;t instantiate abstract class Group with abstract methods _validate, operation, symbol
</pre></div>
</div>
<p>The combination of inheriting from <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></a> and the
<a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.abstractmethod" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">abstractmethod</span></code></a> decorator has the effect that instantiating this class is
an error, and we are told why. We have skipped over the <code class="xref py py-obj docutils literal notranslate"><span class="pre">symbol</span></code> attribute.
There is no <code class="xref py py-obj docutils literal notranslate"><span class="pre">abstractattribute</span></code> decorator, but the same effect can be achieved
by creating an <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.abstractmethod" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">abstractmethod</span></code></a> and converting it into a data attribute using
<a class="reference external" href="https://docs.python.org/3/library/functions.html#property" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">property</span></code></a>. In this case, the order of decorators is important:
<a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.abstractmethod" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">abstractmethod</span></code></a> always needs to be the last, innermost, decorator.</p>
<p>The subclasses of <code class="xref py py-class docutils literal notranslate"><span class="pre">Group</span></code> that we defined,
define all three of these attributes, so they can still be instantiated. For
example:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">example_code.groups_abc</span> <span class="kn">import</span> <span class="n">CyclicGroup</span>

<span class="gp">In [2]: </span><span class="n">C</span> <span class="o">=</span> <span class="n">CyclicGroup</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="nb">print</span><span class="p">(</span><span class="n">C</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">C</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="go">0_C3</span>
</pre></div>
</div>
<p>This illustrates the utility of this use of abstract base classes: the base
class can specify what subclasses need to implement. If a subclass does not
implement all the right attributes then a helpful error is generated, and
subclasses that do implement the class fully work as expected.</p>
</section>
<section id="duck-typing">
<h3>Duck typing<a class="headerlink" href="#duck-typing" title="Permalink to this headline">¶</a></h3>
<p>Before we turn to the second use of abstract base classes, it is useful to
divert our attention to what might be thought of as the type philosophy of
Python. Many programming languages are strongly typed. This means that in
situations such as passing arguments to functions, the type of each variable is
specified, and it is an error to pass a variable of the wrong type. This is not
the Python approach. Instead, Python functions typically do not check the types
of their arguments beyond ensuring that they have the basic properties required
of the operation in question. It doesn’t really matter what the type of an
object is, so long as it has the operations, methods, and attributes required.</p>
<p>The term that is used for this approach to data types is <a class="reference internal" href="#term-duck-typing"><span class="xref std std-term">duck typing</span></a>:
if a data type walks like a duck and quacks like a duck, then it might as well
be a duck. This does, however, beg the question of how a program should know if
an object has the right properties in a given circumstance. It is here that the
second use of abstract base classes comes into play.</p>
</section>
<section id="virtual-subclasses">
<h3>Virtual subclasses<a class="headerlink" href="#virtual-subclasses" title="Permalink to this headline">¶</a></h3>
<details class="sphinx-bs dropdown card mb-3">
<summary class="summary-title card-header">
Video: virtual subclasses.<div class="summary-down docutils">
<svg version="1.1" width="24" height="24" class="octicon octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="summary-up docutils">
<svg version="1.1" width="24" height="24" class="octicon octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<div class="vimeo docutils container">
<iframe src="https://player.vimeo.com/video/526947427"
frameborder="0" allow="autoplay; fullscreen"
allowfullscreen></iframe></div>
</div>
</details><p>We learned in <a class="reference internal" href="3_objects.html#objects"><span class="std std-numref">Week 3</span></a> that we can determine if a type is a
number by checking if it is an instance of <a class="reference external" href="https://docs.python.org/3/library/numbers.html#numbers.Number" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numbers.Number</span></code></a>. This is a
slightly different usage of abstract base classes. Rather than providing part
of the implementation of, say, <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/numbers.html#numbers.Number" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numbers.Number</span></code></a> provides
a categorisation of objects into numbers and non-numbers. This aids duck
typing, by enabling much more general type checking.</p>
<p>The <a class="reference external" href="https://docs.python.org/3/library/index.html#library-index" title="(in Python v3.10)"><span class="xref std std-ref">Standard Library</span></a> contains many abstract base classes
whose role is to support duck typing by identifying objects with particular
properties. For example, the <a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#module-collections.abc" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections.abc</span></code></a> module provides abstract
base classes for container objects with particular properties. The
<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Iterable</span></code></a> abstract base class groups all iterable
containers. For example:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterable</span>

<span class="gp">In [2]: </span><span class="kn">from</span> <span class="nn">example_code.linked_list</span> <span class="kn">import</span> <span class="n">Link</span>

<span class="gp">In [3]: </span><span class="nb">issubclass</span><span class="p">(</span><span class="n">Link</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">)</span>
<span class="gh">Out[3]: </span><span class="go">True</span>
</pre></div>
</div>
<p>Hang on, though, what magic is this? We didn’t declare
<a class="reference internal" href="example_code.html#example_code.linked_list.Link" title="example_code.linked_list.Link"><code class="xref py py-class docutils literal notranslate"><span class="pre">Link</span></code></a> as inheriting from
<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>.</p>
<p>What is going on here is a form of reverse inheritance process. Rather than
<a class="reference internal" href="example_code.html#example_code.linked_list.Link" title="example_code.linked_list.Link"><code class="xref py py-class docutils literal notranslate"><span class="pre">Link</span></code></a> declaring that it inherits from
<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>
determines that <a class="reference internal" href="example_code.html#example_code.linked_list.Link" title="example_code.linked_list.Link"><code class="xref py py-class docutils literal notranslate"><span class="pre">Link</span></code></a> is its subclass. It’s a sort
of adoption mechanism for classes. Of course the authors of the Standard
Library don’t know that we will declare <a class="reference internal" href="example_code.html#example_code.linked_list.Link" title="example_code.linked_list.Link"><code class="xref py py-class docutils literal notranslate"><span class="pre">Link</span></code></a>, so
there is no code explicitly claiming <a class="reference internal" href="example_code.html#example_code.linked_list.Link" title="example_code.linked_list.Link"><code class="xref py py-class docutils literal notranslate"><span class="pre">Link</span></code></a> as a
subclass of <a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>. Instead, <em>any</em> class which
implements the <a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__iter__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__iter__()</span></code></a> special method is a subclass of
<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>. How does this work? Well,
<a class="reference external" href="https://docs.python.org/3/library/functions.html#isinstance" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">isinstance()</span></code></a> and <a class="reference external" href="https://docs.python.org/3/library/functions.html#issubclass" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">issubclass()</span></code></a> are implemented with the help of, you
guessed it, yet another <a class="reference internal" href="3_objects.html#term-special-method"><span class="xref std std-term">special method</span></a>. This time the special method is
<a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABCMeta.__subclasshook__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__subclasshook__()</span></code></a>.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<span id="subclasshook"></span><div class="code-block-caption"><span class="caption-text">The source code for <a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Iterable</span></code></a> extracted
from the <a class="reference external" href="https://github.com/python/cpython/blob/master/Lib/_collections_abc.py">Git repository for the standard Python language
implementation</a>.</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABCMeta</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="o">...</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="k">def</span> <span class="nf">_check_methods</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="o">*</span><span class="n">methods</span><span class="p">):</span>
<span class="linenos"> 6</span>    <span class="n">mro</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="vm">__mro__</span>
<span class="linenos"> 7</span>    <span class="k">for</span> <span class="n">method</span> <span class="ow">in</span> <span class="n">methods</span><span class="p">:</span>
<span class="linenos"> 8</span>        <span class="k">for</span> <span class="n">B</span> <span class="ow">in</span> <span class="n">mro</span><span class="p">:</span>
<span class="linenos"> 9</span>            <span class="k">if</span> <span class="n">method</span> <span class="ow">in</span> <span class="n">B</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
<span class="linenos">10</span>                <span class="k">if</span> <span class="n">B</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">method</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">11</span>                    <span class="k">return</span> <span class="bp">NotImplemented</span>
<span class="linenos">12</span>                <span class="k">break</span>
<span class="linenos">13</span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos">14</span>            <span class="k">return</span> <span class="bp">NotImplemented</span>
<span class="linenos">15</span>    <span class="k">return</span> <span class="kc">True</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="o">...</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="k">class</span> <span class="nc">Iterable</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">ABCMeta</span><span class="p">):</span>
<span class="linenos">20</span>
<span class="linenos">21</span>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>
<span class="linenos">22</span>
<span class="linenos">23</span>    <span class="nd">@abstractmethod</span>
<span class="linenos">24</span>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">25</span>        <span class="k">while</span> <span class="kc">False</span><span class="p">:</span>
<span class="linenos">26</span>            <span class="k">yield</span> <span class="kc">None</span>
<span class="linenos">27</span>
<span class="linenos">28</span>    <span class="nd">@classmethod</span>
<span class="linenos">29</span>    <span class="k">def</span> <span class="nf">__subclasshook__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
<span class="linenos">30</span>        <span class="k">if</span> <span class="bp">cls</span> <span class="ow">is</span> <span class="n">Iterable</span><span class="p">:</span>
<span class="linenos">31</span>            <span class="k">return</span> <span class="n">_check_methods</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="s2">&quot;__iter__&quot;</span><span class="p">)</span>
<span class="linenos">32</span>        <span class="k">return</span> <span class="bp">NotImplemented</span>
<span class="linenos">33</span>
<span class="linenos">34</span>    <span class="n">__class_getitem__</span> <span class="o">=</span> <span class="nb">classmethod</span><span class="p">(</span><span class="n">GenericAlias</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><code class="xref std std-numref docutils literal notranslate"><span class="pre">subclasshook</span></code> shows the actual source code for
<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a> <a class="footnote-reference brackets" href="#python-in-python" id="id3">1</a>. Let’s walk through
this. The inheritance in line 19 is essentially equivalent to inheriting from
<a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></a>. Similarly, lines 21 and 34 are unrelated technical code. At
line 24 we see the <a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__iter__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">object.__iter__()</span></code></a> special method, decorated with
<a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.abstractmethod" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">abstractmethod</span></code></a>. This ensures that classes that do explicitly inherit
from <a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a> have to implement
<a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__iter__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">object.__iter__()</span></code></a>.</p>
<p>The part that currently concerns us, though, is the
declaration of <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABCMeta.__subclasshook__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__subclasshook__()</span></code></a> at line 29.
<a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABCMeta.__subclasshook__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__subclasshook__()</span></code></a> is declared as <a class="reference internal" href="#term-class-method"><span class="xref std std-term">class method</span></a>. This
means that it will be passed the class itself as its first argument, in place
of the object. It is conventional to signal this difference by calling the
first parameter <code class="xref py py-obj docutils literal notranslate"><span class="pre">cls</span></code> instead of <code class="xref py py-obj docutils literal notranslate"><span class="pre">self</span></code>. The second parameter, <code class="xref py py-obj docutils literal notranslate"><span class="pre">C</span></code> is the class
to be tested.</p>
<p>In common with the special methods for arithmetic,
<a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABCMeta.__subclasshook__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__subclasshook__()</span></code></a> returns <a class="reference external" href="https://docs.python.org/3/library/constants.html#NotImplemented" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">NotImplemented</span></code></a> to
indicate cases that it cannot deal with. In this case, if the current class is
not <a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a> (this would happen if the method were
called on a subclass of <a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>) then
<a class="reference external" href="https://docs.python.org/3/library/constants.html#NotImplemented" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">NotImplemented</span></code></a> is returned. If we really are checking <code class="xref py py-obj docutils literal notranslate"><span class="pre">C</span></code> against
<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a> then the <code class="xref py py-obj docutils literal notranslate"><span class="pre">_check_methods</span></code> helper function is
called. The fine details of how this works are a little technical, but in
essence the function loops over <code class="xref py py-obj docutils literal notranslate"><span class="pre">C</span></code> and its superclasses in order (<code class="xref py py-obj docutils literal notranslate"><span class="pre">C.__mro__</span></code>
is the <a class="reference internal" href="#term-method-resolution-order"><span class="xref std std-term">method resolution order</span></a>) and checks if the relevant methods are
defined. If they are all found then <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a> is returned, otherwise the
result is <a class="reference external" href="https://docs.python.org/3/library/constants.html#NotImplemented" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">NotImplemented</span></code></a>. An implementation of
<a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABCMeta.__subclasshook__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__subclasshook__()</span></code></a> could also return <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">False</span></code></a> to
indicate that <code class="xref py py-obj docutils literal notranslate"><span class="pre">C</span></code> is definitely not a subclass.</p>
</section>
</section>
<section id="glossary">
<h2>Glossary<a class="headerlink" href="#glossary" title="Permalink to this headline">¶</a></h2>
<dl class="glossary simple">
<dt id="term-abstract-base-class">abstract base class<a class="headerlink" href="#term-abstract-base-class" title="Permalink to this term">¶</a></dt><dd><p>A class designed only to be the <a class="reference internal" href="8_inheritance.html#term-parent-class"><span class="xref std std-term">parent</span></a> of other
classes, and never to be instantiated itself. Abstract classes often
define the interfaces of <a class="reference internal" href="3_objects.html#term-method"><span class="xref std std-term">methods</span></a> but leave their implementations
to the concrete <a class="reference internal" href="8_inheritance.html#term-child-class"><span class="xref std std-term">child classes</span></a>.</p>
</dd>
<dt id="term-abstract-method">abstract method<a class="headerlink" href="#term-abstract-method" title="Permalink to this term">¶</a></dt><dd><p>A method whose presence is required by an <a class="reference internal" href="#term-abstract-base-class"><span class="xref std std-term">abstract base class</span></a>
but for which concrete subclasses are required to provide the implementation.</p>
</dd>
<dt id="term-class-method">class method<a class="headerlink" href="#term-class-method" title="Permalink to this term">¶</a></dt><dd><p>A <a class="reference internal" href="3_objects.html#term-method"><span class="xref std std-term">method</span></a> which belongs to the class itself, rather than to the
instances of the class. Class methods are declared using the
<a class="reference external" href="https://docs.python.org/3/library/functions.html#classmethod" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">classmethod</span></code></a> <a class="reference internal" href="#term-decorator"><span class="xref std std-term">decorator</span></a> and take the class (<code class="xref py py-obj docutils literal notranslate"><span class="pre">cls</span></code>) as their first
argument, instead of the instance (<code class="xref py py-obj docutils literal notranslate"><span class="pre">self</span></code>). See also: <a class="reference internal" href="8_inheritance.html#term-class-attribute"><span class="xref std std-term">class attribute</span></a>.</p>
</dd>
<dt id="term-decorator">decorator<a class="headerlink" href="#term-decorator" title="Permalink to this term">¶</a></dt><dd><p>A syntax for applying <a class="reference internal" href="#term-higher-order-function"><span class="xref std std-term">higher order functions</span></a> when defining functions. A decorator is applied by writing
<code class="xref py py-obj docutils literal notranslate"><span class="pre">&#64;</span></code> followed by the decorator name immediately before the declaration
of the function or <a class="reference internal" href="3_objects.html#term-method"><span class="xref std std-term">method</span></a> to which the decorator applies.</p>
</dd>
<dt id="term-duck-typing">duck typing<a class="headerlink" href="#term-duck-typing" title="Permalink to this term">¶</a></dt><dd><p>The idea that the precise <a class="reference internal" href="3_objects.html#term-type"><span class="xref std std-term">type</span></a> of an <a class="reference external" href="https://docs.python.org/3/glossary.html#term-object" title="(in Python v3.10)"><span class="xref std std-term">object</span></a> is not important, it is
only important that the object has the correct <a class="reference internal" href="3_objects.html#term-method"><span class="xref std std-term">methods</span></a>
or <a class="reference internal" href="3_objects.html#term-attribute"><span class="xref std std-term">attributes</span></a> for the current operation. If an
object walks like a duck, and quacks like a duck then it can be taken
to be a duck.</p>
</dd>
<dt id="term-higher-order-function">higher order function<a class="headerlink" href="#term-higher-order-function" title="Permalink to this term">¶</a></dt><dd><p>A function which acts on other functions, and which possibly returns
another function as its result.</p>
</dd>
<dt id="term-method-resolution-order">method resolution order<a class="headerlink" href="#term-method-resolution-order" title="Permalink to this term">¶</a></dt><dt id="term-MRO">MRO<a class="headerlink" href="#term-MRO" title="Permalink to this term">¶</a></dt><dd><p>A sequence of the superclasses of the current class ordered by
increasing ancestry. The MRO is searched in order to find
implementations of <a class="reference internal" href="3_objects.html#term-method"><span class="xref std std-term">methods</span></a> and <a class="reference internal" href="3_objects.html#term-attribute"><span class="xref std std-term">attributes</span></a>.</p>
</dd>
<dt id="term-syntactic-sugar">syntactic sugar<a class="headerlink" href="#term-syntactic-sugar" title="Permalink to this term">¶</a></dt><dd><p>A feature of the programming language which adds no new functionality,
but which enables a clearer or more concise syntax. Python
<a class="reference internal" href="3_objects.html#term-special-method"><span class="xref std std-term">special methods</span></a> are a form of syntactic sugar as they enable,
for example, the syntax <code class="xref py py-obj docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></code> instead of something like <code class="xref py py-obj docutils literal notranslate"><span class="pre">a.add(b)</span></code>.</p>
</dd>
<dt id="term-virtual-subclass">virtual subclass<a class="headerlink" href="#term-virtual-subclass" title="Permalink to this term">¶</a></dt><dd><p>A class which does not declare its descent from the superclass through
its definition, but which is instead claimed as a subclass by the
superclass.</p>
</dd>
</dl>
</section>
<section id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h2>
<p>Obtain the <a class="reference external" href="https://classroom.github.com/a/qTArFlxP">skeleton code for these exercises from GitHub classroom</a>.</p>
<div class="proof proof-type-exercise" id="id7">

    <div class="proof-title">
        <span class="proof-type">Exercise </span>
        
    </div><div class="proof-content">
<p>The objective of this exercise is to write a <a class="reference internal" href="#term-decorator"><span class="xref std std-term">decorator</span></a> which logs
whenever the decorated function is called. This sort of decorator could be
very useful in debugging code. Create the decorator in the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">log_decorator.log_decorator</span></code> module and ensure it is importable as
<code class="xref py py-obj docutils literal notranslate"><span class="pre">log_decorator.log_call</span></code>. The decorator should be applicable to functions
taking any combination of arguments.</p>
<p>The logging itself should be accomplished using
the built-in <a class="reference external" href="https://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logging</span></code></a> module by calling <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.info" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.info()</span></code></a> and passing
the log message.</p>
<p>The log message should comprise the string <code class="xref py py-obj docutils literal notranslate"><span class="pre">&quot;Calling:</span> <span class="pre">&quot;</span></code> followed by the
function name (accessible using the <a class="reference external" href="https://docs.python.org/3/reference/import.html#name__" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__name__</span></code></a> attribute), followed by
round brackets containing first the <a class="reference external" href="https://docs.python.org/3/library/functions.html#repr" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">repr()</span></code></a> of the positional
arguments, followed by the key=value pairs the keyword arguments.</p>
</div></div><div class="proof proof-type-exercise" id="id8">

    <div class="proof-title">
        <span class="proof-type">Exercise </span>
        
    </div><div class="proof-content">
<p>The <code class="xref py py-mod docutils literal notranslate"><span class="pre">groups.groups</span></code> module in the skeleton code is the new version
introduced above, using an <a class="reference internal" href="#term-abstract-base-class"><span class="xref std std-term">abstract base class</span></a>. The
<code class="xref py py-obj docutils literal notranslate"><span class="pre">log_decorator.log_call</span></code> <a class="reference internal" href="#term-decorator"><span class="xref std std-term">decorator</span></a> has been applied to the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Group._validate()</span></code> <a class="reference internal" href="#term-abstract-method"><span class="xref std std-term">abstract method</span></a>. However, even once you
have implemented this decorator, it never gets called. Your challenge is to
modify <code class="xref py py-mod docutils literal notranslate"><span class="pre">groups.groups</span></code> so that the decorator is called every time a
subclass <code class="xref py py-meth docutils literal notranslate"><span class="pre">_validate()</span></code> method is called, but <strong>without</strong> moving or
duplicating <code class="xref py py-obj docutils literal notranslate"><span class="pre">&#64;log_call</span></code>.</p>
</div></div></section>
<section id="exam-preparation">
<h2>Exam preparation<a class="headerlink" href="#exam-preparation" title="Permalink to this headline">¶</a></h2>
<p>The exam will be similar in format to the <a class="reference internal" href="7_midterm.html#midterm"><span class="std std-ref">midterm test</span></a>, so all
of the advice about preparing applies there too. As with all second year
elective modules, the exam will comprise four questions, each marked out of 20.</p>
<p>As with everything in this course, the one thing you can do to effectively
prepare for the exam is to program. You should complete any of the exercises in
the course that you have not yet done, and more exercises are given below.</p>
<section id="exam-scope">
<h3>Exam scope<a class="headerlink" href="#exam-scope" title="Permalink to this headline">¶</a></h3>
<p>Everything we have covered in the course up to and including week 10 will be
fully examinable. The week 11 material is not examinable with the
following exceptions:</p>
<ol class="arabic simple">
<li><p>You may need to use <a class="reference internal" href="#term-abstract-base-class"><span class="xref std std-term">abstract base classes</span></a> from
the standard library to check the type of variables. This is simply what you
have been doing all term, for example using <a class="reference external" href="https://docs.python.org/3/library/numbers.html#numbers.Number" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numbers.Number</span></code></a> to check
that a value is numeric.</p></li>
<li><p>The skeleton code may include <a class="reference internal" href="#term-abstract-base-class"><span class="xref std std-term">abstract base classes</span></a> from which your classes may need to inherit. This is actually a help
to you in the exam, because the <a class="reference internal" href="#term-abstract-method"><span class="xref std std-term">abstract methods</span></a>
will provide information about what you need to implement, and a helpful
error message if you haven’t done so.</p></li>
</ol>
</section>
<section id="support-while-revising">
<h3>Support while revising<a class="headerlink" href="#support-while-revising" title="Permalink to this headline">¶</a></h3>
<p>The module Piazza forum will remain open throughout the revision period and we
will be very happy to respond to your questions. There will also be a live
revision session during week 1 of summer term in the module team. This will be
an opportunity to ask individual questions just like in the labs. If enough
people attend then I will also run a group Q &amp; A session.</p>
</section>
<section id="practice-questions">
<h3>Practice questions<a class="headerlink" href="#practice-questions" title="Permalink to this headline">¶</a></h3>
<p>Some specifically-designed practice questions are presented below. In addition to this, there are a lot of very good exercises in
chapters 7 and 9 of <a class="reference external" href="https://link.springer.com/book/10.1007%2F978-3-662-49887-3">Hans Petter Langtangen, A Primer on Scientific Programming
with Python</a>.
You can access that book by logging in with your Imperial credentials.</p>
<p>The first two questions are in exam format.</p>
<div class="proof proof-type-exercise" id="id9">

    <div class="proof-title">
        <span class="proof-type">Exercise </span>
        
    </div><div class="proof-content">
<p>Obtain the <a class="reference external" href="https://classroom.github.com/a/HdgipMxw">practice problem from GitHub Classroom</a>. Follow the instructions in
the README file that will be displayed on GitHub on your copy of the page.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This exercise is fully set up as an exam question, including provisional
points on the autotests. It should be doable in 30 minutes, though the
level of programming is a little more basic than the exam questions.</p>
</div>
</div></div><div class="proof proof-type-exercise" id="id10">

    <div class="proof-title">
        <span class="proof-type">Exercise </span>
        
    </div><div class="proof-content">
<p>Obtain the <a class="reference external" href="https://classroom.github.com/a/6usAsES4">practice problem from GitHub Classroom</a>. Follow the instructions in
the README file that will be displayed on GitHub on your copy of the page.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This exercise is at the level of an exam question, though longer. An
actual exam question would be pruned back to be achievable in 30
minutes. Here the complete exercise is presented because the main thing
you need to do is practice programming, and cutting out material
doesn’t help with that. Marks are not given as the question is the
wrong length, so dividing 20 marks over the question would just be
misleading</p>
</div>
</div></div><p>In addition to these exam-style questions, you can also usefully practice
programming by going beyond the specification of the exercises in the course.
The following exercises are just ideas for how to do that. They do not come
with additional code or tests.</p>
<div class="proof proof-type-exercise" id="id11">

    <div class="proof-title">
        <span class="proof-type">Exercise </span>
        
    </div><div class="proof-content">
<p>Extend the <code class="xref py py-class docutils literal notranslate"><span class="pre">Polynomial</span></code> class from <a class="reference internal" href="3_objects.html#objects"><span class="std std-numref">Week 3</span></a> to
support polynomial division. Polynomial division results in a quotient and
a remainder, so you might choose to implement <a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__floordiv__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__floordiv__()</span></code></a>
to return the quotient and <a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__mod__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__mod__()</span></code></a> to return the remainder,
in a manner analogous to integer division. You might also implement
<a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__truediv__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__truediv__()</span></code></a> and have it return the quotient if the
polynomial division is exact, but raise <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a> if there is a
remainder.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Don’t forget that repeating code is poor style, so you might need a
helper method to implement the actual polynomial division.</p>
</div>
</div></div><div class="proof proof-type-exercise" id="id12">

    <div class="proof-title">
        <span class="proof-type">Exercise </span>
        
    </div><div class="proof-content">
<p>Extend the <code class="xref py py-class docutils literal notranslate"><span class="pre">Deque</span></code> class from <a class="reference internal" href="5_abstract_data_types.html#abstract-data-types"><span class="std std-numref">Week 5</span></a> to automatically resize the ring buffer by a
proportion of its length when it is full, and when it becomes too empty.
You can check the behaviour of your implementation against
<a class="reference external" href="https://docs.python.org/3/library/collections.html#collections.deque" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.deque</span></code></a>.</p>
</div></div><div class="proof proof-type-exercise" id="id13">

    <div class="proof-title">
        <span class="proof-type">Exercise </span>
        
    </div><div class="proof-content">
<p>For a real challenge, extend the groups implementation from <a class="reference internal" href="8_inheritance.html#inheritance"><span class="std std-numref">Week
7</span></a> to support taking the quotient of two groups. What do the
values and validation of a quotient group look like in code? You could
implement <a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__truediv__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__truediv__()</span></code></a> on <code class="xref py py-class docutils literal notranslate"><span class="pre">Group</span></code> to provide the user
interface.</p>
</div></div><div class="proof proof-type-exercise" id="id14">

    <div class="proof-title">
        <span class="proof-type">Exercise </span>
        
    </div><div class="proof-content">
<p>Write additional single dispatch visitor functions to extend the
capabilities of the symbolic algebra system you wrote in <a class="reference internal" href="10_trees_and_directed_acyclic_graphs.html#trees"><span class="std std-numref">Week 9</span></a>. You could, for example, write a visitor which performs
cancellation of expressions involving 1 or 0. You could implement expansion
of brackets according to distributive laws. Finally you could canonicalise
commutative operators such as <code class="xref py py-obj docutils literal notranslate"><span class="pre">+</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">*</span></code> so that, for example <code class="xref py py-obj docutils literal notranslate"><span class="pre">1</span> <span class="pre">+</span> <span class="pre">x</span></code> is
mapped to <code class="xref py py-obj docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">1</span></code>. Doing this over multiple layers of the tree
(for example, transforming <code class="xref py py-obj docutils literal notranslate"><span class="pre">1</span> <span class="pre">+</span> <span class="pre">2*x</span> <span class="pre">+</span> <span class="pre">3*x**2</span></code> to <code class="xref py py-obj docutils literal notranslate"><span class="pre">3*x**2</span> <span class="pre">+</span> <span class="pre">2*x</span> <span class="pre">+</span> <span class="pre">1</span></code>) is an additional
challenge.</p>
</div></div><p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="python-in-python"><span class="brackets"><a class="fn-backref" href="#id3">1</a></span></dt>
<dd><p>Most of the <a class="reference external" href="https://docs.python.org/3/library/index.html#library-index" title="(in Python v3.10)"><span class="xref std std-ref">Python Standard Library</span></a> is written
in Python, so diving in and reading the source code is often an option if
you really want to know how some part of the language works.</p>
</dd>
</dl>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019-2021, David A. Ham. Modified by Patrick E. Farrell.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>
  </body>
</html>